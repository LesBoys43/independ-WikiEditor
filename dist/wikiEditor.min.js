(()=>{var me=Object.defineProperty;var s=(e,i)=>me(e,"name",{value:i,configurable:!0});var _=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var y=_((Le,G)=>{var _e={"@metadata":{authors:["Anakmalaysia","Anarkiisto","Bencmq","Diskdance","Fantasticfears","Gaoxuewei","GuoPC","Hydra","Lakejason0","Lantx","Liangent","LittlePaw365","Liuxinyu970226","Onecountry","PhiLiP","Shirayuki","Shizhao","Simon Shek","Stang","Tranve","VulpesVulpes825","Winston Sung","Xiaomingyan","Zhang8569","\u5217\u7EF4\u52B3\u5FB7","\u6C88\u6F84\u5FC3","\u94C1\u6876"]},wikieditor:"\u9AD8\u7EA7wikitext\u7F16\u8F91\u754C\u9762","wikieditor-desc":"\u63D0\u4F9B\u9AD8\u7EA7\u3001\u53EF\u6269\u5C55\u7684wikitext\u7F16\u8F91\u754C\u9762","wikieditor-toolbar":"\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-desc":"\u6709\u589E\u5F3A\u7684\u4F7F\u7528\u6027\u80FD\u7684\u9875\u9762\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-preference":"\u542F\u7528\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-preference-help":"\u6B64\u529F\u80FD\u6709\u65F6\u79F0\u4F5C\u201C2010\u5E74\u7248wikitext\u7F16\u8F91\u5668\u201D\u3002","wikieditor-toolbar-tool-bold":"\u7C97\u4F53","wikieditor-toolbar-tool-bold-example":"\u7C97\u4F53\u6587\u672C","wikieditor-toolbar-tool-italic":"\u659C\u4F53","wikieditor-toolbar-tool-italic-example":"\u659C\u4F53\u6587\u672C","wikieditor-toolbar-tool-link":"\u94FE\u63A5","wikieditor-toolbar-tool-link-title":"\u63D2\u5165\u94FE\u63A5","wikieditor-toolbar-tool-link-int":"\u94FE\u5F80wiki\u9875\u9762","wikieditor-toolbar-tool-link-int-target":"\u76EE\u6807\u9875\u9762\u6216\u7F51\u5740\uFF1A","wikieditor-toolbar-tool-link-int-target-tooltip":"\u9875\u9762\u7684\u6807\u9898\u6216URL","wikieditor-toolbar-tool-link-int-text":"\u663E\u793A\u6587\u672C\uFF1A","wikieditor-toolbar-tool-link-int-text-tooltip":"\u8981\u663E\u793A\u7684\u6587\u672C","wikieditor-toolbar-tool-link-ext":"\u94FE\u5F80\u5916\u90E8\u7F51\u9875","wikieditor-toolbar-tool-link-ext-target":"\u94FE\u63A5\u7F51\u5740\uFF1A","wikieditor-toolbar-tool-link-ext-text":"\u94FE\u63A5\u6587\u672C\uFF1A","wikieditor-toolbar-tool-link-insert":"\u63D2\u5165\u94FE\u63A5","wikieditor-toolbar-tool-link-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-link-int-target-status-exists":"{{SITENAME}}\u4E0A\u5B58\u5728\u8BE5\u9875\u9762","wikieditor-toolbar-tool-link-int-target-status-notexists":"\u8BE5\u9875\u9762\u5728 {{SITENAME}} \u4E0A\u4E0D\u5B58\u5728","wikieditor-toolbar-tool-link-int-target-status-invalid":"\u60A8\u6307\u5B9A\u7684\u6807\u9898\u65E0\u6548","wikieditor-toolbar-tool-link-int-target-status-external":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-link-int-target-status-disambig":"\u6B64\u9875\u9762\u4E0D\u662F\u4E00\u4E2A\u5185\u5BB9\u9875\u9762\uFF0C\u800C\u662F\u4E00\u4E2A\u5217\u51FA\u4E86\u5177\u6709\u76F8\u4F3C\u540D\u79F0\u4E3B\u9898\u7684\u5217\u8868","wikieditor-toolbar-tool-link-lookslikeinternal":`\u60A8\u8F93\u5165\u7684\u7F51\u5740\u4F3C\u4E4E\u6307\u5411\u53E6\u4E00\u4E2Awiki\u9875\u9762\u3002
\u662F\u5426\u5E0C\u671B\u5C06\u5176\u6539\u4E3A\u5185\u90E8\u94FE\u63A5\uFF1F`,"wikieditor-toolbar-tool-link-lookslikeinternal-int":"\u5185\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-link-lookslikeinternal-ext":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-file":"\u56FE\u7247\u548C\u5A92\u4F53","wikieditor-toolbar-tool-file-title":"\u63D2\u5165\u6587\u4EF6","wikieditor-toolbar-file-target":"\u6587\u4EF6\u540D\uFF1A","wikieditor-toolbar-file-caption":"\u6807\u9898\uFF1A","wikieditor-toolbar-file-alt":"\u53EF\u66FF\u4EE3\u6587\u672C","wikieditor-toolbar-file-alt-help":"\u60A8\u53EF\u4EE5\u7528\u6B64\u53EF\u9009\u533A\u57DF\u6765\u4E3A\u90A3\u4E9B\u4E0D\u80FD\u770B\u89C1\u9879\u76EE\u7684\u4EBA\u4EEC\u5199\u4E00\u6BB5\u6587\u5B57\u63CF\u8FF0\u3002\u8FD9\u6BB5\u63CF\u8FF0\u5E94\u8BE5\u8BA9\u4ED6\u4EEC\u8DB3\u591F\u7406\u89E3\u5A92\u4F53\u9879\u76EE\u63D0\u4F9B\u7684\u76EE\u7684\u548C\u4FE1\u606F\u3002\u8FD9\u5BF9\u4E8E\u76F2\u4EBA\u7528\u6237\u548C\u5176\u4ED6\u4F7F\u7528\u5C4F\u5E55\u9605\u8BFB\u5668\u8F6F\u4EF6\u6216\u7EAF\u6587\u672C\u6D4F\u89C8\u5668\u7684\u4EBA\u4EEC\u6765\u8BF4\u662F\u81F3\u5173\u91CD\u8981\u7684\u3002","wikieditor-toolbar-file-alt-help-label":"\uFF08\u663E\u793A\u5E2E\u52A9\uFF09","wikieditor-toolbar-file-size":"\u5C3A\u5BF8\uFF1A","wikieditor-toolbar-file-float":"\u5BF9\u9F50\uFF1A","wikieditor-toolbar-file-default":"\uFF08\u9ED8\u8BA4\uFF09","wikieditor-toolbar-file-format":"\u683C\u5F0F\uFF1A","wikieditor-toolbar-file-format-none":"\u65E0","wikieditor-toolbar-tool-file-insert":"\u63D2\u5165","wikieditor-toolbar-tool-file-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-file-upload":"\u4E0A\u4F20","wikieditor-toolbar-tool-signature":"\u7B7E\u540D\u53CA\u65F6\u95F4\u6233","wikieditor-toolbar-section-advanced":"\u9AD8\u7EA7","wikieditor-toolbar-tool-heading":"\u6807\u9898","wikieditor-toolbar-tool-heading-1":"1\u7EA7","wikieditor-toolbar-tool-heading-2":"2\u7EA7","wikieditor-toolbar-tool-heading-3":"3\u7EA7","wikieditor-toolbar-tool-heading-4":"4\u7EA7","wikieditor-toolbar-tool-heading-5":"5\u7EA7","wikieditor-toolbar-tool-heading-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-group-format":"\u683C\u5F0F","wikieditor-toolbar-tool-ulist":"\u65E0\u5E8F\u5217\u8868","wikieditor-toolbar-tool-ulist-example":"\u65E0\u5E8F\u5217\u8868\u9879","wikieditor-toolbar-tool-olist":"\u6709\u5E8F\u5217\u8868","wikieditor-toolbar-tool-olist-example":"\u6709\u5E8F\u5217\u8868\u9879","wikieditor-toolbar-tool-code":"\u4EE3\u7801","wikieditor-toolbar-tool-code-example":"\u4EE3\u7801","wikieditor-toolbar-tool-nowiki":"\u975Ewiki\u683C\u5F0F","wikieditor-toolbar-tool-nowiki-example":"\u8BF7\u5728\u8FD9\u91CC\u63D2\u5165\u975E\u683C\u5F0F\u5316\u6587\u672C","wikieditor-toolbar-tool-redirect":"\u91CD\u5B9A\u5411","wikieditor-toolbar-tool-redirect-example":"\u76EE\u6807\u9875\u9762\u540D\u79F0","wikieditor-toolbar-tool-big":"\u5927\u53F7","wikieditor-toolbar-tool-big-example":"\u5927\u53F7\u6587\u672C","wikieditor-toolbar-tool-small":"\u5C0F\u53F7","wikieditor-toolbar-tool-small-example":"\u5C0F\u53F7\u6587\u672C","wikieditor-toolbar-tool-superscript":"\u4E0A\u6807","wikieditor-toolbar-tool-superscript-example":"\u4E0A\u6807\u6587\u672C","wikieditor-toolbar-tool-subscript":"\u4E0B\u6807","wikieditor-toolbar-tool-subscript-example":"\u4E0B\u6807\u6587\u672C","wikieditor-toolbar-group-insert":"\u63D2\u5165","wikieditor-toolbar-tool-gallery":"\u56FE\u5E93","wikieditor-toolbar-tool-gallery-example":`\u793A\u4F8B.jpg|\u8BF4\u660E1
\u793A\u4F8B.jpg|\u8BF4\u660E2`,"wikieditor-toolbar-tool-newline":"\u6362\u884C","wikieditor-toolbar-tool-table":"\u8868\u683C","wikieditor-toolbar-tool-table-example-cell-text":"\u5355\u5143\u683C\u6587\u672C","wikieditor-toolbar-tool-table-example-header":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-tool-table-example-caption":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-tool-table-title":"\u63D2\u5165\u8868\u683C","wikieditor-toolbar-tool-table-dimensions-rows":"\u884C\u6570","wikieditor-toolbar-tool-table-dimensions-columns":"\u5217\u6570","wikieditor-toolbar-tool-table-dimensions-header":"\u6DFB\u52A0\u6807\u9898\u884C","wikieditor-toolbar-tool-table-wikitable":"\u663E\u793A\u8FB9\u6846","wikieditor-toolbar-tool-table-sortable":"\u4F7F\u8868\u683C\u5185\u5BB9\u53EF\u6392\u5E8F","wikieditor-toolbar-tool-table-example":"\u793A\u4F8B","wikieditor-toolbar-tool-table-preview":"\u9884\u89C8","wikieditor-toolbar-tool-table-insert":"\u63D2\u5165","wikieditor-toolbar-tool-table-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-table-toomany":"\u5728\u8FD9\u4E2A\u5BF9\u8BDD\u6846\u4E2D\u65E0\u6CD5\u63D2\u5165\u8D85\u8FC7$1\u4E2A{{PLURAL:$1|\u5355\u5143\u683C}}\u7684\u8868\u683C\u3002","wikieditor-toolbar-tool-table-invalidnumber":"\u60A8\u8F93\u5165\u7684\u884C\u6570\u6216\u5217\u6570\u65E0\u6548\u3002","wikieditor-toolbar-tool-table-zero":"\u60A8\u4E0D\u80FD\u63D2\u5165\u4E00\u4E2A\u96F6\u884C\u6216\u96F6\u5217\u7684\u8868\u683C\u3002","wikieditor-toolbar-tool-replace":"\u67E5\u627E\u548C\u66FF\u6362","wikieditor-toolbar-tool-replace-title":"\u67E5\u627E\u548C\u66FF\u6362","wikieditor-toolbar-tool-replace-search":"\u67E5\u627E\uFF1A","wikieditor-toolbar-tool-replace-replace":"\u66FF\u6362\u4E3A\uFF1A","wikieditor-toolbar-tool-replace-case":"\u533A\u5206\u5927\u5C0F\u5199","wikieditor-toolbar-tool-replace-regex":"\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F","wikieditor-toolbar-tool-replace-button-findnext":"\u67E5\u627E\u4E0B\u4E00\u4E2A","wikieditor-toolbar-tool-replace-button-replace":"\u66FF\u6362","wikieditor-toolbar-tool-replace-button-replaceall":"\u66FF\u6362\u6240\u6709","wikieditor-toolbar-tool-replace-close":"\u5173\u95ED","wikieditor-toolbar-tool-replace-nomatch":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u5339\u914D\u9879\u3002","wikieditor-toolbar-tool-replace-success":"\u5B8C\u6210\u4E86$1\u6B21{{PLURAL:$1|\u66FF\u6362}}\u3002","wikieditor-toolbar-tool-replace-emptysearch":"\u60A8\u6CA1\u6709\u8F93\u5165\u67E5\u627E\u5185\u5BB9\u3002","wikieditor-toolbar-tool-replace-invalidregex":"\u60A8\u8F93\u5165\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u65E0\u6548\uFF1A$1","wikieditor-toolbar-tool-replace-word":"\u5168\u5B57\u5339\u914D","wikieditor-toolbar-section-characters":"\u7279\u6B8A\u5B57\u7B26","wikieditor-toolbar-section-help":"\u5E2E\u52A9","wikieditor-toolbar-help-heading-description":"\u8BF4\u660E","wikieditor-toolbar-help-heading-syntax":"\u8F93\u5165\u5185\u5BB9","wikieditor-toolbar-help-heading-result":"\u8F93\u51FA\u7ED3\u679C","wikieditor-toolbar-help-page-format":"\u683C\u5F0F","wikieditor-toolbar-help-page-link":"\u94FE\u63A5","wikieditor-toolbar-help-page-heading":"\u6807\u9898","wikieditor-toolbar-help-page-list":"\u5217\u8868","wikieditor-toolbar-help-page-file":"\u6587\u4EF6","wikieditor-toolbar-help-page-discussion":"\u8BA8\u8BBA","wikieditor-toolbar-help-content-italic-description":"\u659C\u4F53","wikieditor-toolbar-help-content-italic-example":"\u659C\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-bold-description":"\u7C97\u4F53","wikieditor-toolbar-help-content-bold-example":"\u7C97\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-bolditalic-description":"\u7C97\u659C\u4F53","wikieditor-toolbar-help-content-bolditalic-example":"\u7C97\u659C\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-ilink-description":"\u5185\u90E8\u94FE\u63A5","wikieditor-toolbar-help-content-ilink-example":`[[\u9875\u9762\u6807\u9898]]
[[\u9875\u9762\u6807\u9898|\u94FE\u63A5\u6807\u7B7E]]`,"wikieditor-toolbar-help-content-xlink-description":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-help-content-xlink-example-label":"\u94FE\u63A5\u6587\u672C","wikieditor-toolbar-help-content-heading2-description":"2\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading2-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading3-description":"3\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading3-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading4-description":"4\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading4-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading5-description":"5\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading5-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-ulist-description":"\u65E0\u5E8F\u5217\u8868","wikieditor-toolbar-help-content-ulist-example":"\u5217\u8868\u9879\u76EE","wikieditor-toolbar-help-content-olist-description":"\u6709\u5E8F\u5217\u8868","wikieditor-toolbar-help-content-olist-example":"\u5217\u8868\u9879\u76EE","wikieditor-toolbar-help-content-file-description":"\u5D4C\u5165\u6587\u4EF6","wikieditor-toolbar-help-content-file-syntax":"[[$1:Example.png|$2|$3]]","wikieditor-toolbar-help-content-file-caption":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-signaturetimestamp-description":"\u5E26\u65F6\u95F4\u6233\u7684\u7B7E\u540D","wikieditor-toolbar-help-content-signaturetimestamp-example":"--[[$1:$3|$3]]\uFF08[[$2:$3|\u7559\u8A00]]\uFF09 2023\u5E746\u670829\u65E5 (\u56DB) 15:54 (UTC)","wikieditor-toolbar-help-content-signature-description":"\u7B7E\u540D","wikieditor-toolbar-help-content-signature-example":"[[$1:$3|$3]] ([[$2:$3|\u7559\u8A00]])","wikieditor-toolbar-help-content-signature-username":"\u7528\u6237\u540D","wikieditor-toolbar-help-content-indent-description":"\u7F29\u8FDB","wikieditor-toolbar-help-content-indent1":"\u666E\u901A\u6587\u672C","wikieditor-toolbar-help-content-indent2":"\u7F29\u8FDB\u6587\u672C","wikieditor-toolbar-help-content-indent3":"\u7F29\u8FDB\u6587\u672C","tag-wikieditor-description":"\u901A\u8FC7[[mw:Special:MyLanguage/Extension:WikiEditor|WikiEditor]]\uFF082010\u5E74\u7248wikitext\u7F16\u8F91\u5668\uFF09\u505A\u51FA\u7684\u7F16\u8F91","wikieditor-realtimepreview-preview":"\u9884\u89C8","wikieditor-realtimepreview-error":"\u672A\u80FD\u52A0\u8F7D\u9884\u89C8","wikieditor-realtimepreview-reload":"\u91CD\u65B0\u52A0\u8F7D","wikieditor-realtimepreview-reload-title":"\u91CD\u65B0\u52A0\u8F7D\u5B9E\u65F6\u9884\u89C8\u7A97\u683C","wikieditor-realtimepreview-manual":"\u8BF7\u7ACB\u5373\u91CD\u65B0\u52A0\u8F7D\u4EE5\u624B\u52A8\u9884\u89C8\u60A8\u7684\u7F16\u8F91\u3002"};G.exports={i18n:s(function(e){let i={__content:_e[e],params:s(function(){let t=Array.from(arguments);return t.length==1&&typeof t[0]=="object"?Object.keys(t[0]).forEach(l=>{i.__content=i.__content.replaceAll(`$${l}`,t[0][l])}):t.forEach((l,o)=>{i.__content=i.__content.replaceAll(`$${o+1}`,l)}),i},"params"),plain:s(function(){return i.__content},"plain"),escaped:s(function(){return escape(i.plain())},"escaped")};return i.text=i.plain,i.toString=i.plain,i.toLocaleString=i.plain,Array.from(arguments).length>1&&i.params.apply(i,Array.from(arguments).slice(1,1/0)),i},"i18n")}});var K=_((De,J)=>{var D=y().i18n,W="visualeditor-symbolList-recentlyUsed-specialCharacters",u={api:{addToToolbar:s(function(e,i){for(let t in i)switch(t){case"sections":{let l=e.modules.toolbar.$toolbar.find("div.sections"),o=e.modules.toolbar.$toolbar.find("div.tabs");for(let a in i[t]){if(a==="main"||a==="secondary"){e.modules.toolbar.$toolbar.prepend(u.fn.buildSection(e,a,i[t][a]));continue}l.append(u.fn.buildSection(e,a,i[t][a])),o.append(u.fn.buildTab(e,a,i[t][a]))}break}case"groups":{if(!("section"in i))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section');for(let o in i[t])l.append(u.fn.buildGroup(e,o,i[t][o]));break}case"tools":{if(!("section"in i&&"group"in i))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section div[rel="'+i.group+'"].group');for(let o in i[t])l.append(u.fn.buildTool(e,o,i[t][o]));l.children().length&&l.removeClass("empty");break}case"pages":{if(!("section"in i))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section .pages'),o=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section .index');for(let a in i[t])l.append(u.fn.buildPage(e,a,i[t][a])),o.append(u.fn.buildBookmark(e,a,i[t][a]));u.fn.updateBookletSelection(e,i.section,l,o);break}case"rows":{if(!("section"in i&&"page"in i))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section div[rel="'+i.page+'"].page table');for(let o=0;o<i.rows.length;o++)l.append(u.fn.buildRow(e,i.rows[o]));break}case"characters":{if(!("section"in i&&"page"in i))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+i.section+'"].section div[rel="'+i.page+'"].page div'),o=l.data("actions");for(let a=0;a<i.characters.length;a++)l.append(u.fn.buildCharacter(i.characters[a],o).on("mousedown",n=>(n.preventDefault(),!1)).on("click",n=>{let r=$(n.target);return u.fn.doAction(r.parent().data("context"),r.parent().data("actions")[r.attr("rel")]),n.preventDefault(),!1}));break}default:break}},"addToToolbar"),removeFromToolbar:s(function(e,i){if(typeof i.section=="string"){let t='div.tabs span[rel="'+i.section+'"].tab',l='div[rel="'+i.section+'"].section',o=null;if(typeof i.group=="string")l+=' div[rel="'+i.group+'"].group',typeof i.tool=="string"&&(o=l,l=l+' [rel="'+i.tool+'"].tool');else if(typeof i.page=="string"){let a=l+' div.index div[rel="'+i.page+'"]';l+=' div.pages div[rel="'+i.page+'"].page',typeof i.character=="string"?l+=' span[rel="'+i.character+'"]':typeof i.row=="number"?l+=" table tr:not(:has(th)):eq("+i.row+")":(e.modules.toolbar.$toolbar.find(a).remove(),u.fn.updateBookletSelection(e,i.section,e.modules.toolbar.$toolbar.find(l),e.modules.toolbar.$toolbar.find(a)))}else e.modules.toolbar.$toolbar.find(t).remove();if(e.modules.toolbar.$toolbar.find(l).remove(),o){let a=e.modules.toolbar.$toolbar.find(o);a.children().length===0&&a.addClass("empty")}}},"removeFromToolbar")},fn:{create:s(function(e,i){"$toolbar"in e.modules.toolbar||(e.modules.toolbar.$toolbar=$("<div>").addClass("wikiEditor-ui-toolbar").attr("id","wikiEditor-ui-toolbar"),u.fn.build(e,i),e.$ui.find(".wikiEditor-ui-top").append(e.modules.toolbar.$toolbar))},"create"),doAction:s(function(e,i){switch(i.type){case"replace":case"encapsulate":{if(e.$textarea.prop("readonly"))break;let t={pre:i.options.pre,peri:i.options.peri,post:i.options.post},l=i.type==="replace";if("regex"in i.options&&"regexReplace"in i.options){let o=e.$textarea.textSelection("getSelection");o!==""&&i.options.regex.test(o)&&(t.peri=o.replace(i.options.regex,i.options.regexReplace),t.pre=t.post="",l=!0)}e.$textarea.textSelection("encapsulateSelection",Object.assign({},i.options,t,{replace:l}));break}case"callback":typeof i.execute=="function"&&i.execute(e);break;case"dialog":e.fn.saveSelection(),e.$textarea.wikiEditor("openDialog",i.module);break;default:break}},"doAction"),buildGroup:s(function(e,i,t){let l=$("<div>").attr({class:"group group-"+i,rel:i}),o=t.label;o&&$("<span>").addClass("label").text(o).appendTo(l);let a=!0;if("tools"in t)for(let n in t.tools){let r=u.fn.buildTool(e,n,t.tools[n]);r&&(a=a&&r.css("display")==="none",l.append(r))}return a&&l.addClass("empty"),l},"buildGroup"),buildTool:s(function(e,i,t){if("filters"in t){for(let o=0;o<t.filters.length;o++)if($(t.filters[o]).length===0)return null}let l=t.label;switch(t.type){case"button":case"toggle":{let o;if(t.oouiIcon){let a={framed:!1,classes:["tool"],icon:t.oouiIcon,title:this.buildShortcutLabel(l,t.hotkey)},n;t.type==="button"?n=new OO.ui.ButtonWidget(a):t.type==="toggle"&&(n=new OO.ui.ToggleButtonWidget(a)),o=n.$element.attr("rel",i).data("ooui",n)}else if(o=$("<a>").attr({tabindex:0,title:l,rel:i,role:"button",class:"tool tool-button"}).text(l),t.icon){let a=$.wikiEditor.autoIcon(t.icon,$.wikiEditor.imgPath+"toolbar/");o.css("background-image","url("+a+")")}return o.data("setActive",a=>{o.toggleClass("tool-active",a),o.data("ooui")&&t.type==="toggle"&&(o.data("ooui").setValue(a),OO.ui.WikimediaUITheme&&OO.ui.theme instanceof OO.ui.WikimediaUITheme&&setTimeout(()=>{o.data("ooui").$icon.toggleClass("oo-ui-image-progressive",a)}))}),"action"in t&&(o.data("action",t.action).data("context",e).on("mousedown",a=>(a.preventDefault(),!1)),o.data("ooui")?o.data("ooui").on("click",()=>{u.fn.doAction(e,t.action)}):o.on("click keydown",a=>{if(a.type==="click"||a.type==="keydown"&&a.key==="Enter")return u.fn.doAction(e,t.action),a.preventDefault(),!1}),"hotkey"in t&&(u.fn.ctrlShortcuts[t.hotkey]=t)),o}case"select":{let o="menu-"+Date.now(),a=$("<div>").attr({rel:i,class:"tool tool-select"}),n=$("<div>").addClass("options");if("list"in t)for(let r in t.list){let d=t.list[r].label;n.append($("<a>").data("action",t.list[r].action).data("context",e).on("mousedown",p=>(p.preventDefault(),!1)).on("click keydown",p=>{if(p.type==="click"||p.type==="keydown"&&p.key==="Enter"){let c=$(p.target);return u.fn.doAction(c.data("context"),c.data("action"),c),c.closest(".tool-select").removeClass("options-shown"),p.preventDefault(),!1}}).text(d).addClass("option").attr({rel:r,tabindex:0,role:"menuitem"}))}return a.append($("<a>").addClass("label skin-invert").text(l).data("options",n).attr({role:"button",tabindex:0,"aria-expanded":!1,"aria-controls":o,"aria-haspopup":"menu"}).on("mousedown",r=>(r.preventDefault(),!1)).on("click keydown",r=>{if(r.type==="click"||r.type==="keydown"&&r.key==="Enter"){let d=$(r.target),p=d.data("options"),c=!p.closest(".tool-select").hasClass("options-shown");return p.closest(".tool-select").toggleClass("options-shown",c),d.attr("aria-expanded",c.toString()),r.preventDefault(),!1}})),a.append($("<div>").addClass("menu").append(n)),a}case"element":{let o;return t.element instanceof OO.ui.HtmlSnippet?o=t.element.toString():typeof t.element=="function"?o=t.element(e):o=t.element,$("<div>").attr({rel:i,class:"tool tool-element"}).append(o)}default:return null}},"buildTool"),buildBookmark:s(function(e,i,t){let l=t.label,o=$("<div>");return o.text(l).attr({rel:i,role:"option"}).data("context",e).on("mousedown",a=>(a.preventDefault(),!1)).on("click",a=>{o.parent().parent().find(".page").hide(),o.parent().parent().find(".page-"+o.attr("rel")).show().trigger("loadPage"),o.addClass("current").siblings().removeClass("current");let n=o.parent().parent().attr("rel");return $.cookie("wikiEditor-"+o.data("context").instance+"-booklet-"+n+"-page",o.attr("rel"),{expires:30,path:"/"}),a.preventDefault(),!1})},"buildBookmark"),buildPage:s(function(e,i,t,l){let o=$("<div>").attr({class:"page page-"+i,rel:i});return l?i==="recent"?o.on("loadPage",()=>{try{t.characters=JSON.parse(localStorage.get(`wikieditor-${W}`)||"[]")}catch{t.characters=[]}u.fn.reallyBuildPage(e,i,t,o)}):o.one("loadPage",()=>{u.fn.reallyBuildPage(e,i,t,o)}):u.fn.reallyBuildPage(e,i,t,o),o},"buildPage"),reallyBuildPage:s(function(e,i,t,l){switch(t.layout){case"table":{let o=$("<table>").addClass("table-"+i);if("headings"in t&&o.append(u.fn.buildHeading(e,t.headings)),"rows"in t)for(let a=0;a<t.rows.length;a++)o.append(u.fn.buildRow(e,t.rows[a]));l.addClass("page-table").append(o);break}case"characters":{l.addClass("page-characters");let o=$("<div>").data("context",e).data("actions",{}),a=o.data("actions");if("language"in t&&o.attr("lang",t.language),"direction"in t?o.attr("dir",t.direction):o.attr("dir","ltr"),"characters"in t){for(let n=0;n<t.characters.length;n++)o.append(u.fn.buildCharacter(t.characters[n],a));o.children().attr("role","option").on("mousedown",n=>(n.preventDefault(),!1)).on("click",n=>{let r=$(n.target),d=a[r.attr("rel")];Array.isArray(d)||(d=[d]);for(let p of d)u.fn.doAction(e,p);return n.preventDefault(),!1})}l.empty(),l.append(o);break}}},"reallyBuildPage"),buildHeading:s(function(e,i){let t=$("<tr>");for(let l=0;l<i.length;l++)i[l].msg||console.warn("The toolbar headings must use a `msg` key with a `__wikieditor_i18n` key as value. Other keys are deprecated."),t.append(i[l].msg?$("<th>").append(D(i[l].msg).parseDom()):$("<th>").html($.wikiEditor.autoSafeMsg(i[l],["html","text"])));return t},"buildHeading"),buildRow:s(function(e,i){let t=$("<tr>");for(let l in i)t.append($("<td>").addClass("cell cell-"+l).append($("<span>").html(i[l].html)));return t},"buildRow"),buildCharacter:s(function(e,i){let t=e;if(typeof e=="string"?e={label:e,action:{type:"replace",options:{peri:e,selectPeri:!1}},configRepresentation:t}:e&&0 in e&&1 in e&&(e={label:e[0],action:{type:"replace",options:{peri:e[1],selectPeri:!1}},configRepresentation:t}),e&&"action"in e&&"label"in e){let l={type:"callback",character:e,execute:s(function(){let n;try{n=JSON.parse(localStorage.get(`wikieditor-${W}`)||"[]")}catch{n=[]}let r=this.character.configRepresentation?this.character.configRepresentation:this.character,d=n.findIndex(p=>JSON.stringify(r)===JSON.stringify(p));d!==-1&&n.splice(d,1),n.unshift(r),n=n.slice(0,32),localStorage.set(`wikieditor-${W}`,JSON.stringify(n))},"execute")};i[e.label]=[e.action,l];let o=e.titleMsg?D(e.titleMsg):e.title;return $("<span>").attr({rel:e.label,title:o}).text(e.label)}return console.log("A character for the toolbar was undefined. This is not supposed to happen. Double check the config."),$()},"buildCharacter"),buildTab:s(function(e,i,t){let l=$.cookie("wikiEditor-"+e.instance+"-toolbar-section");l!==null&&$.cookie("wikiEditor-"+e.instance+"-toolbar-section",l,{expires:30,path:"/"});let o=$("<a>").addClass(l===i?"current":null).addClass("skin-invert").attr({tabindex:0,role:"button","aria-expanded":(l===i).toString(),"aria-controls":"wikiEditor-section-"+i}).text(t.label).data("context",e).on("mouseup",()=>{o.trigger("blur")}).on("mousedown",a=>(a.preventDefault(),!1)).on("click keydown",a=>{if(a.type!=="click"&&(a.type!=="keydown"||a.key!=="Enter"))return;o.attr("aria-pressed","true"),$(".tab > a").each((p,c)=>{c!==a.target&&$(c).attr("aria-pressed","false")});let n=o.data("context").$ui.find(".sections"),r=n.find(".section-"+o.parent().attr("rel")),d=!r.hasClass("section-visible");return n.find(".section-visible").removeClass("section-visible").addClass("section-hidden"),o.attr("aria-expanded","false").parent().parent().find("a").removeClass("current"),d&&(r.removeClass("section-hidden").attr("aria-expanded","true").addClass("section-visible"),o.attr("aria-expanded","true").addClass("current")),$.cookie("wikiEditor-"+o.data("context").instance+"-toolbar-section",d?r.attr("rel"):null,{expires:30,path:"/"}),a.preventDefault(),!1});return $("<span>").attr({class:"tab tab-"+i,rel:i}).append(o)},"buildTab"),buildSection:s(function(e,i,t){let l=$("<div>").attr({class:t.type+" section section-"+i,rel:i,id:"wikiEditor-section-"+i}),a=$.cookie("wikiEditor-"+e.instance+"-toolbar-section")===i;return u.fn.reallyBuildSection(e,i,t,l,t.deferLoad),i!=="main"&&i!=="secondary"&&l.attr("aria-expanded",a.toString()).addClass(a?"section-visible":"section-hidden"),l},"buildSection"),reallyBuildSection:s(function(e,i,t,l,o){switch(e.$textarea.trigger("wikiEditor-toolbar-buildSection-"+l.attr("rel"),[t]),t.type){case"toolbar":{if("groups"in t)for(let a in t.groups)l.append(u.fn.buildGroup(e,a,t.groups[a]));break}case"booklet":{let a=$("<div>").addClass("pages").attr({tabindex:"0",role:"listbox"}).on("keydown",r=>{let d=a.children().filter(function(){return $(this).css("display")!=="none"});$.wikiEditor.modules.toolbar.fn.handleKeyDown(d.children().first(),r,a)}),n=$("<div>").addClass("index").attr({tabindex:"0",role:"listbox"}).on("keydown",r=>{$.wikiEditor.modules.toolbar.fn.handleKeyDown(n,r,n)});if("pages"in t)for(let r in t.pages)a.append(u.fn.buildPage(e,r,t.pages[r],o)),n.append(u.fn.buildBookmark(e,r,t.pages[r]));l.append(n,a),u.fn.updateBookletSelection(e,i,a,n);break}}},"reallyBuildSection"),updateBookletSelection:s(function(e,i,t,l){let o="wikiEditor-"+e.instance+"-booklet-"+i+"-page",a=$.cookie(o);a!==null&&$.cookie(o,a,{expires:30,path:"/"});let n=l.find('*[rel="'+a+'"]');n.length===0&&(n=l.children().eq(0),a=n.attr("rel")),t.children().hide(),t.find('*[rel="'+a+'"]').show().trigger("loadPage"),l.children().removeClass("current"),n.addClass("current")},"updateBookletSelection"),build:s(function(e,i){let t=$("<div>").addClass("tabs").appendTo(e.modules.toolbar.$toolbar),l=$("<div>").addClass("sections").appendTo(e.modules.toolbar.$toolbar);e.modules.toolbar.$toolbar.append($("<div>").css("clear","both"));for(let o in i)o==="main"||o==="secondary"?e.modules.toolbar.$toolbar.prepend(u.fn.buildSection(e,o,i[o])):(l.append(u.fn.buildSection(e,o,i[o])),t.append(u.fn.buildTab(e,o,i[o])));setTimeout(()=>{e.$textarea.trigger("wikiEditor-toolbar-doneInitialSections")}),u.fn.setupShortcuts(e)},"build"),ctrlShortcuts:{},setupShortcuts:s(function(e){e.$textarea.on("keydown",i=>{let t=this.modifierForKey(i.key),l=t==="ctrlKey"?"metaKey":"ctrlKey",o=i[t]&&!i[l]&&!i.altKey&&!i.shiftKey&&(u.fn.ctrlShortcuts[i.key]||u.fn.ctrlShortcuts[i.which]);o&&(i.preventDefault(),u.fn.doAction(e,o.action))})},"setupShortcuts"),buildShortcutLabel:s(function(e,i){if(typeof i!="string")return e;let t=this.modifierForKey(i)==="ctrlKey"?"ctrl+":"\u2318",l=D("word-separator").plain(),o=(l+D("brackets").plain()).split("$1"),a=new RegExp(o.map(escape).join(".*?")+"$");return e.replace(a,"")+l+D("brackets",t+i).plain()},"buildShortcutLabel"),modifierForKey:s(function(e){let i=$.client.profile();return i.name==="safari"&&e===","?"ctrlKey":i.platform==="mac"?"metaKey":"ctrlKey"},"modifierForKey"),handleKeyDown:s(function(e,i,t){let l=e.find(".wikiEditor-character-highlighted"),o=t.find(".wikiEditor-character-highlighted").offset(),a=o?o.top:0,n=t.offset().top,r;switch(i.keyCode){case 38:l.length?(l.removeClass("wikiEditor-character-highlighted"),r=l.prev(),r=r.length?r:l,r.addClass("wikiEditor-character-highlighted")):e.children().first().addClass("wikiEditor-character-highlighted"),i.preventDefault(),i.stopPropagation();break;case 40:l.length?(l.removeClass("wikiEditor-character-highlighted"),r=l.next(),r=r.length?r:l,r.addClass("wikiEditor-character-highlighted")):e.children().first().addClass("wikiEditor-character-highlighted"),i.preventDefault(),i.stopPropagation();break;case 13:l.trigger("click");break}t.scrollTop(t.scrollTop()+(a-n))},"handleKeyDown")}};J.exports=u});var Y=_((Ne,Q)=>{var $e=y().i18n,E={api:{addDialog:s(function(e,i){E.fn.create(e,i)},"addDialog"),openDialog:s(function(e,i){if(i in E.modules){let t=E.modules[i],l=$("#"+t.id);l.length===0&&(E.fn.reallyCreate(e,t,i),l=$("#"+t.id)),l.closest(".ui-dialog").find(".ui-dialog-titlebar-close").removeClass("ui-state-focus"),l.dialog("open")}},"openDialog"),closeDialog:s(function(e,i){i in E.modules&&$("#"+E.modules[i].id).dialog("close")},"closeDialog")},fn:{create:s(function(e,i){for(let t in i){let l=i[t],o=!1;if(typeof l.filters<"u"){for(let n=0;n<l.filters.length;n++)if($(l.filters[n]).length===0){o=!0;break}}let a=$("#"+l.id);a.length>0&&a.data("context").$textarea!==e.$textarea&&a.remove(),a=$("#"+l.id),!o&&a.length===0&&(E.modules[t]=l,e.$textarea.trigger("wikiEditor-dialogs-setup-"+t),typeof l.immediateCreate<"u"&&l.immediateCreate&&E.fn.reallyCreate(e,l,t))}},"create"),reallyCreate:s(function(e,i,t){let l=i.dialog;l.bgiframe=!0,l.autoOpen=!1,typeof l.modal>"u"&&(l.modal=!0),console.warn("The dialog title must be a mw.Message object. Other types are deprecated."),l.title=i.title,l.newButtons={};for(let n in l.buttons)l.newButtons[$e(n)]=l.buttons[n];l.buttons=l.newButtons;let o;i.html instanceof $?o=i.html:o=$($.parseHTML(i.html)),$("<div>").attr("id",i.id).append(o).data("context",e).appendTo(document.body).each(i.init).dialog(l).on("dialogclose",()=>{e.fn.restoreSelection()}),e.$textarea.trigger("wikiEditor-dialogs-loaded-"+t)},"reallyCreate")},modules:{},quickDialog:s(function(e,i){$("<div>").text(e).appendTo(document.body).dialog(Object.assign({bgiframe:!0,modal:!0},i)).dialog("open")},"quickDialog")};Q.exports=E});var ee=_(()=>{var O=y().i18n,Z=Object.prototype.hasOwnProperty,R=(function(){let e=$(document.body).hasClass("rtl"),i=["en"];return i.length>=2&&!/^en-/.test(i[i.length-2])&&i.pop(),e&&i.push("default-rtl"),i.push("default"),i})();function P(e,i){let t=e+"Msg: "+i,l="/";l.slice(0,2)==="//"&&(l=location.protocol+l);let o;e==="html"||e==="text"||e==="title"?o="__wikieditor_i18n( "+JSON.stringify(i)+" ).parse()":o="__wikieditor_i18n( "+JSON.stringify(i)+" )",s(()=>{console.log("wikiEditor_autoMsg","WikiEditor: Use `"+e+": "+o+"` instead of `"+e+"Msg: "+JSON.stringify(i)+"`.\nSearch: "+l)},"deprecationMsg")()}s(P,"deprecateAutoMsg");$.wikiEditor={modules:{toolbar:K(),dialogs:Y()},extensions:{},instances:[],imgPath:"./images/",isRequired:s(function(e,i){if(typeof e.req<"u"){for(let t in e.req)if(e.req[t]===i)return!0}return!1},"isRequired"),autoMsg:s(function(e,i){if(console.warn("autoMsg is deprecated. Use __wikieditor_i18n() instead."),typeof i=="object"){for(let t in i)if(i[t]in e||i[t]+"Msg"in e){i=i[t];break}}if(i in e)return e[i];if(i+"Msg"in e){let t=e[i+"Msg"];return Array.isArray(t)&&t.length>=2?(P(i,t[0]),O.apply(O,t).text()):(P(i,t),O(t).text())}else return""},"autoMsg"),autoSafeMsg:s(function(e,i){if(consolee.warn("autoSafeMsg is deprecated. Use __wikieditor_i18n() instead."),typeof i=="object"){for(let t in i)if(i[t]in e||i[t]+"Msg"in e){i=i[t];break}}if(i in e)return e[i];if(i+"Msg"in e){let t=e[i+"Msg"];return Array.isArray(t)&&t.length>=2?(P(i,t[0]),O.apply(O,t).escaped()):(P(i,t),O(t).escaped())}else return""},"autoSafeMsg"),autoLang:s(function(e){for(let i=0;i<R.length;i++){let t=R[i];if(Z.call(e,t))return e[t]}return e},"autoLang"),autoIcon:s(function(e,i){i=i||$.wikiEditor.imgPath;for(let t=0;t<R.length;t++){let l=R[t];if(e&&Z.call(e,l)){let o=e[l];return o.slice(0,5)==="data:"||o.slice(0,7)!=="http://"&&o.slice(0,8)!=="https://"&&o[0]!=="/"&&(o=i+o),o}}return e},"autoIcon")};$.fn.wikiEditor=function(){let e=$(this).data("wikiEditor-context");if(!e){e={$textarea:$(this),$focusedElem:null,views:{},modules:{},data:{},instance:$.wikiEditor.instances.push($(this))-1,savedSelection:null,extensions:[]},e.api={addModule:s(function(o,a){let n={};typeof a=="string"?n[a]={}:typeof a=="object"&&(n=a);for(let r in n)if(typeof r=="string"&&typeof $.wikiEditor.modules[r]<"u"){if("api"in $.wikiEditor.modules[r])for(let d in $.wikiEditor.modules[r].api)d in o.api||(o.api[d]=$.wikiEditor.modules[r].api[d]);"fn"in $.wikiEditor.modules[r]&&"create"in $.wikiEditor.modules[r].fn&&typeof o.modules[r]>"u"&&(o.modules[r]={},$.wikiEditor.modules[r].fn.create(o,n[r]))}},"addModule")},e.evt={},e.fn={trigger:s(function(o,a){if(a=a||{type:"custom"},a.data=a.data||{},o in e.evt&&!e.evt[o](a))return!1;let n=!0;for(let r in e.modules)if(r in $.wikiEditor.modules&&"evt"in $.wikiEditor.modules[r]&&o in $.wikiEditor.modules[r].evt){let d=$.wikiEditor.modules[r].evt[o](e,a);d!==null&&(n=n&&d)}return n},"trigger"),saveSelection:s(function(){e.$focusedElem=$(":focus"),e.$textarea.trigger("focus"),e.savedSelection=e.$textarea.textSelection("getCaretPosition",{startAndEnd:!0})},"saveSelection"),restoreSelection:s(function(){e.savedSelection&&(e.$textarea.trigger("focus"),e.$textarea.textSelection("setSelection",{start:e.savedSelection[0],end:e.savedSelection[1]}),e.savedSelection=null),e.$focusedElem&&e.$focusedElem.trigger("focus")},"restoreSelection")};let t=e.$textarea.is(":focus"),l=e.$textarea.textSelection("getCaretPosition",{startAndEnd:!0});e.$textarea.wrapAll($("<div>").addClass("wikiEditor-ui")).wrapAll($("<div>").addClass("wikiEditor-ui-view")).wrapAll($("<div>").addClass("wikiEditor-ui-left")).wrapAll($("<div>").addClass("wikiEditor-ui-bottom")).wrapAll($("<div>").addClass("wikiEditor-ui-text")),e.$textarea.prop("scrollTop",$("#wpScrolltop").val()),t&&(e.$textarea.trigger("focus"),e.$textarea.textSelection("setSelection",{start:l[0],end:l[1]})),e.$ui=e.$textarea.parent().parent().parent().parent().parent(),e.$wikitext=e.$textarea.parent().parent().parent().parent(),e.$ui.after($("<div>").addClass("wikiEditor-ui-clear")),e.$wikitext.append($("<div>").addClass("wikiEditor-ui-right"),$("<div>").addClass("wikiEditor-ui-clear")),e.$wikitext.find(".wikiEditor-ui-left").prepend($("<div>").addClass("wikiEditor-ui-top")),e.view="wikitext",$(window).on("resize",o=>{e.fn.trigger("resize",o)})}let i=$.makeArray(arguments);if(i[0]==="addModule"&&typeof i[1]<"u"){let t=i[1];typeof t!="object"&&(t={},t[i[1]]="");for(let l in t)if(l in $.wikiEditor.modules){for(let o in $.wikiEditor.extensions)$.wikiEditor.isRequired($.wikiEditor.modules[l],o)&&!e.extensions.includes(o)&&(e.extensions[e.extensions.length]=o,$.wikiEditor.extensions[o](e));break}}if(i.length>0){let t=i.shift();t in e.api&&e.api[t](e,i[0]||{})}return $(this).data("wikiEditor-context",e)}});var B=_((We,xe)=>{xe.exports={magicWords:["__TOC__","__NOTOC__"],signature:"--\u53EF\u7231\u7684\u732B\u5A18~"}});var le=_((Ke,oe)=>{function te(){return new Proxy({},{get:te,set:s(()=>{},"set")})}s(te,"noErrGetter");var U=B(),ie="File",h=te.call();function q(e){let i=$("<div>");return i.append(e),i.find("a").attr("href","#"),i.html()}s(q,"delink");var ye={toolbar:{main:{type:"toolbar",groups:{format:{tools:{bold:{label:__wikieditor_i18n("wikieditor-toolbar-tool-bold"),type:"button",oouiIcon:"bold",action:{type:"encapsulate",options:{pre:"'''",peri:__wikieditor_i18n("wikieditor-toolbar-tool-bold-example"),post:"'''"}},hotkey:"b"},italic:{section:"main",group:"format",id:"italic",label:__wikieditor_i18n("wikieditor-toolbar-tool-italic"),type:"button",oouiIcon:"italic",action:{type:"encapsulate",options:{pre:"''",peri:__wikieditor_i18n("wikieditor-toolbar-tool-italic-example"),post:"''"}},hotkey:"i"}}},insert:{tools:{signature:{label:__wikieditor_i18n("wikieditor-toolbar-tool-signature"),type:"button",oouiIcon:"signature",action:{type:"encapsulate",options:{pre:U.signature}}}}}}},secondary:{type:"toolbar",groups:{default:{tools:{}}}},advanced:{label:__wikieditor_i18n("wikieditor-toolbar-section-advanced"),type:"toolbar",groups:{heading:{tools:{heading:{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading"),type:"select",list:{"heading-2":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-2"),action:{type:"encapsulate",options:{pre:"== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ==",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1==$3==$4",ownline:!0}}},"heading-3":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-3"),action:{type:"encapsulate",options:{pre:"=== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ===",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1===$3===$4",ownline:!0}}},"heading-4":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-4"),action:{type:"encapsulate",options:{pre:"==== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ====",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1====$3====$4",ownline:!0}}},"heading-5":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-5"),action:{type:"encapsulate",options:{pre:"===== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" =====",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1=====$3=====$4",ownline:!0}}}}}}},format:{label:__wikieditor_i18n("wikieditor-toolbar-group-format"),tools:{ulist:{label:__wikieditor_i18n("wikieditor-toolbar-tool-ulist"),type:"button",oouiIcon:"listBullet",action:{type:"encapsulate",options:{pre:"* ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-ulist-example"),post:"",regex:/^([*#:;]*)\s*(.*)$/gm,regexReplace:"$1* $2",ownline:!0,splitlines:!0}}},olist:{label:__wikieditor_i18n("wikieditor-toolbar-tool-olist"),type:"button",oouiIcon:"listNumbered",action:{type:"encapsulate",options:{pre:"# ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-olist-example"),post:"",regex:/^([*#:;]*)\s*(.*)$/gm,regexReplace:"$1# $2",ownline:!0,splitlines:!0}}},code:{label:__wikieditor_i18n("wikieditor-toolbar-tool-code"),type:"button",oouiIcon:"code",action:{type:"encapsulate",options:{pre:"<code>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-code-example"),post:"</code>"}}},nowiki:{label:__wikieditor_i18n("wikieditor-toolbar-tool-nowiki"),type:"button",oouiIcon:"noWikiText",action:{type:"encapsulate",options:{pre:"<nowiki>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-nowiki-example"),post:"</nowiki>"}},hotkey:"\\"},newline:{label:__wikieditor_i18n("wikieditor-toolbar-tool-newline"),type:"button",oouiIcon:"newline",action:{type:"encapsulate",options:{pre:`<br>
`}}}}},size:{tools:{big:{label:__wikieditor_i18n("wikieditor-toolbar-tool-big"),type:"button",oouiIcon:"bigger",action:{type:"encapsulate",options:{pre:"<big>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-big-example"),post:"</big>"}}},small:{label:__wikieditor_i18n("wikieditor-toolbar-tool-small"),type:"button",oouiIcon:"smaller",action:{type:"encapsulate",options:{pre:"<small>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-small-example"),post:"</small>"}}},superscript:{label:__wikieditor_i18n("wikieditor-toolbar-tool-superscript"),type:"button",oouiIcon:"superscript",action:{type:"encapsulate",options:{pre:"<sup>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-superscript-example"),post:"</sup>"}},hotkey:"."},subscript:{label:__wikieditor_i18n("wikieditor-toolbar-tool-subscript"),type:"button",oouiIcon:"subscript",action:{type:"encapsulate",options:{pre:"<sub>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-subscript-example"),post:"</sub>"}},hotkey:","}}},insert:{label:__wikieditor_i18n("wikieditor-toolbar-group-insert"),tools:{gallery:{label:__wikieditor_i18n("wikieditor-toolbar-tool-gallery"),type:"button",oouiIcon:"imageGallery",action:{type:"encapsulate",options:{pre:`<gallery>
`,peri:__wikieditor_i18n("wikieditor-toolbar-tool-gallery-example",ie),post:`
</gallery>`,ownline:!0}}},redirect:{label:__wikieditor_i18n("wikieditor-toolbar-tool-redirect"),type:"button",oouiIcon:"articleRedirect",action:{type:"encapsulate",options:{pre:U.magicWords.redirect[0]+" [[",peri:__wikieditor_i18n("wikieditor-toolbar-tool-redirect-example"),post:"]]",ownline:!0}}}}}}},characters:{label:__wikieditor_i18n("wikieditor-toolbar-section-characters"),type:"booklet",deferLoad:!0,pages:{recent:{label:__wikieditor_i18n("special-characters-recently-used"),layout:"characters",characters:[]},latin:{label:__wikieditor_i18n("special-characters-group-latin"),layout:"characters",characters:h.latin},latinextended:{label:__wikieditor_i18n("special-characters-group-latinextended"),layout:"characters",characters:h.latinextended},ipa:{label:__wikieditor_i18n("special-characters-group-ipa"),layout:"characters",characters:h.ipa},symbols:{label:__wikieditor_i18n("special-characters-group-symbols"),layout:"characters",characters:h.symbols},greek:{label:__wikieditor_i18n("special-characters-group-greek"),layout:"characters",language:"el",characters:h.greek},greekextended:{label:__wikieditor_i18n("special-characters-group-greekextended"),layout:"characters",characters:h.greekextended},cyrillic:{label:__wikieditor_i18n("special-characters-group-cyrillic"),layout:"characters",characters:h.cyrillic},arabic:{label:__wikieditor_i18n("special-characters-group-arabic"),layout:"characters",language:"ar",direction:"rtl",characters:h.arabic},arabicextended:{label:__wikieditor_i18n("special-characters-group-arabicextended"),layout:"characters",language:"ar",direction:"rtl",characters:h.arabicextended},hebrew:{label:__wikieditor_i18n("special-characters-group-hebrew"),layout:"characters",direction:"rtl",characters:h.hebrew},bangla:{label:__wikieditor_i18n("special-characters-group-bangla"),language:"bn",layout:"characters",characters:h.bangla},tamil:{label:__wikieditor_i18n("special-characters-group-tamil"),language:"ta",layout:"characters",characters:h.tamil},telugu:{label:__wikieditor_i18n("special-characters-group-telugu"),language:"te",layout:"characters",characters:h.telugu},sinhala:{label:__wikieditor_i18n("special-characters-group-sinhala"),language:"si",layout:"characters",characters:h.sinhala},devanagari:{label:__wikieditor_i18n("special-characters-group-devanagari"),layout:"characters",characters:h.devanagari},gujarati:{label:__wikieditor_i18n("special-characters-group-gujarati"),language:"gu",layout:"characters",characters:h.gujarati},thai:{label:__wikieditor_i18n("special-characters-group-thai"),language:"th",layout:"characters",characters:h.thai},lao:{label:__wikieditor_i18n("special-characters-group-lao"),language:"lo",layout:"characters",characters:h.lao},khmer:{label:__wikieditor_i18n("special-characters-group-khmer"),language:"km",layout:"characters",characters:h.khmer},canadianaboriginal:{label:__wikieditor_i18n("special-characters-group-canadianaboriginal"),language:"cr",layout:"characters",characters:h.canadianaboriginal},runes:{label:__wikieditor_i18n("special-characters-group-runes"),layout:"characters",characters:h.runes}}},help:{label:__wikieditor_i18n("wikieditor-toolbar-section-help"),type:"booklet",deferLoad:!0,pages:{format:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-format"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-italic-description").parse()},syntax:{html:"''"+__wikieditor_i18n("wikieditor-toolbar-help-content-italic-example").escaped()+"''"},result:{html:"<em>"+__wikieditor_i18n("wikieditor-toolbar-help-content-italic-example").parse()+"</em>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-bold-description").parse()},syntax:{html:"'''"+__wikieditor_i18n("wikieditor-toolbar-help-content-bold-example").escaped()+"'''"},result:{html:"<strong>"+__wikieditor_i18n("wikieditor-toolbar-help-content-bold-example").parse()+"</strong>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-description").parse()},syntax:{html:"'''''"+__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-example").escaped()+"'''''"},result:{html:"<strong><em>"+__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-example").parse()+"</em></strong>"}}]},link:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-link"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-example").escaped()},result:{html:'<span class="pre-wrap">'+q(__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-example").parseDom())+"</span>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example1",__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-url"),__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-label")).escaped()},result:{html:'<span class="mw-parser-output pre-wrap">'+q(__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example2",__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-url"),__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-label"),1).parseDom())+"</span>"}}]},heading:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-heading"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-description").parse()},syntax:{html:"== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-example").escaped()+" =="},result:{html:"<h2>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-example").parse()+"</h2>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-description").parse()},syntax:{html:"=== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-example").escaped()+" ==="},result:{html:"<h3>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-example").parse()+"</h3>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-description").parse()},syntax:{html:"==== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-example").escaped()+" ===="},result:{html:"<h4>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-example").parse()+"</h4>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-description").parse()},syntax:{html:"===== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-example").escaped()+" ====="},result:{html:"<h5>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-example").parse()+"</h5>"}}]},list:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-list"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-description").parse()},syntax:{html:"* "+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").escaped()+"<br />* "+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").escaped()},result:{html:"<ul><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").parse()+"</li><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").parse()+"</li></ul>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-olist-description").parse()},syntax:{html:"# "+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").escaped()+"<br /># "+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").escaped()},result:{html:"<ol><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").parse()+"</li><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").parse()+"</li></ol>"}}]},file:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-file"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-file-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-file-syntax",ie,U.magicWords.img_thumbnail[0],__wikieditor_i18n("wikieditor-toolbar-help-content-file-caption")).escaped()},result:{html:'<div class="thumbinner" style="width: 102px;"><a class="image"><img alt="" src="'+$.wikiEditor.imgPath+'toolbar/example-image.png" width="100" height="50" class="thumbimage"/></a><div class="thumbcaption"><div class="magnify"><a title="'+__wikieditor_i18n("thumbnail-more").escaped()+'" class="internal"></a></div>'+__wikieditor_i18n("wikieditor-toolbar-help-content-file-caption").escaped()+"</div></div>"}}]},discussion:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-discussion"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-syntax").escaped()},result:{html:q(__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-example","\u7528\u6237","\u7528\u6237\u8BA8\u8BBA","\u7528\u6237\u540D").parseDom())}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signature-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signature-syntax").escaped()},result:{html:q(__wikieditor_i18n("wikieditor-toolbar-help-content-signature-example","\u7528\u6237","\u7528\u6237\u8BA8\u8BBA","\u7528\u6237\u540D").parseDom())}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent1").escaped()+"<br />:"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent2").escaped()+"<br />::"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent3").escaped()},result:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent1").parse()+"<dl><dd>"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent2").parse()+"<dl><dd>"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent3").parse()+"</dd></dl></dd></dl>"}}]}}}}};oe.exports=ye});var z=_((Ue,re)=>{var ae=y().i18n;function I(){OO.EventEmitter.call(this),this.radioInt=new OO.ui.RadioOptionWidget({label:ae("wikieditor-toolbar-tool-link-int")}),this.radioExt=new OO.ui.RadioOptionWidget({label:ae("wikieditor-toolbar-tool-link-ext")});let e=new OO.ui.RadioSelectWidget({items:[this.radioInt,this.radioExt]});e.connect(this,{choose:this.onRadioChoose});let i={align:"top",classes:["mw-wikiEditor-InsertLink-LinkTypeField"]};I.super.call(this,e,i)}s(I,"LinkTypeField");OO.inheritClass(I,OO.ui.FieldLayout);OO.mixinClass(I,OO.EventEmitter);I.static.LINK_MODE_INTERNAL="internal";I.static.LINK_MODE_EXTERNAL="external";I.prototype.setIsExternal=function(e){this.getField().selectItem(e?this.radioExt:this.radioInt)};I.prototype.isInternal=function(){return this.radioInt.isSelected()};I.prototype.onRadioChoose=function(){this.emit("change",this.radioExt.isSelected())};re.exports=I});var se=_((Ve,ne)=>{var ve=y().i18n;function S(e){this.external=e.external||!1,this.external&&(e.icon="linkExternal",e.description=ve("wikieditor-toolbar-tool-link-int-target-status-external"),e.url=e.data.slice(0,1).toLowerCase()+e.data.slice(1),e.data=e.url,/^[a-z]+:\/\/./.test(e.url)||(e.url="http://"+e.url),e.missing=!1),this.disambiguation=e.disambiguation||!1,this.missing=e.missing||!1,S.super.call(this,e)}s(S,"InsertLinkTitleOptionWidget");OO.inheritClass(S,OO.ui.Widget);S.prototype.isExternal=function(){return this.external};S.prototype.isMissing=function(){return this.missing};S.prototype.isDisambiguation=function(){return this.disambiguation};ne.exports=S});var ce=_((je,de)=>{var Ee=se(),Ie=y().i18n;function f(){f.super.call(this,{showImages:!0,showDescriptions:!0,showDisambigsLast:!0,placeholder:Ie("wikieditor-toolbar-tool-link-int-target-tooltip"),$overlay:this.getOverlay(),validateTitle:!1,showInterwikis:!0,required:!0,addQueryInput:!0})}s(f,"TitleInputWidget");OO.inheritClass(f,OO.ui.Widget);f.static.urlRegex=new RegExp("^(http|https|ftp|sftp|www\\.)","i");f.prototype.onLookupInputBlur=function(){f.super.prototype.onLookupInputBlur.apply(this),this.selectFirstMatch()};f.prototype.selectFirstMatch=function(){this.getLookupMenuItems().then(e=>{for(let i=0;i<e.length;i++){let t=e[i],l=this.getQueryValue();if(t.getData()===l||t.getData()===l.charAt(0).toUpperCase()+l.slice(1)){this.emit("select",t);break}}})};f.prototype.getOptionWidgetData=function(e,i){let t=f.super.prototype.getOptionWidgetData.call(this,e,i);return t.external=i.originalData.external,t};f.prototype.createOptionWidget=function(e){return new Ee(e)};f.prototype.getLookupCacheDataFromResponse=function(e){let i=f.super.prototype.getLookupCacheDataFromResponse(e);if(i.pages===void 0)return i;for(let t in i.pages)if(Object.prototype.hasOwnProperty.call(i.pages,t)){let l=i.pages[t];l.external=l.missing!==void 0&&this.looksLikeExternalLink(l.title)}return i};f.prototype.onLookupMenuChoose=function(e){f.super.prototype.onLookupMenuChoose.call(this,e),this.emit("select",e)};f.prototype.getOverlay=function(){return OO.ui.getDefaultOverlay().clone().css("z-index","1010").appendTo(document.body)};f.prototype.looksLikeExternalLink=function(e){return this.constructor.static.urlRegex.test(e)};de.exports=f});var ue=_((Ge,pe)=>{var v=z(),Ce=ce(),V=y().i18n;function x(){OO.EventEmitter.call(this);let e=new Ce;e.connect(this,{change:this.onChange,select:this.onSelect}),this.urlMode=v.static.LINK_MODE_INTERNAL,this.urlModeManual=!1;let i={align:"top",label:V("wikieditor-toolbar-tool-link-int-target"),classes:["mw-wikiEditor-InsertLink-TitleInputField"]};x.super.call(this,e,i)}s(x,"TitleInputField");OO.inheritClass(x,OO.ui.FieldLayout);OO.mixinClass(x,OO.EventEmitter);x.prototype.reset=function(){this.getField().setValue(""),this.urlModeManual=!1,this.urlMode=v.static.LINK_MODE_INTERNAL};x.prototype.setUrlMode=function(e){this.urlMode=e===v.static.LINK_MODE_EXTERNAL?v.static.LINK_MODE_EXTERNAL:v.static.LINK_MODE_INTERNAL,this.urlModeManual=!0,this.getField().selectFirstMatch(),this.validate(this.getField().getValue())};x.prototype.isExternal=function(){return this.urlMode===v.static.LINK_MODE_EXTERNAL};x.prototype.makeMessage=function(e,i){return this.message=new OO.ui.MessageWidget({type:e,inline:!0,label:i}),this.message.$element};x.prototype.setMessage=function(e,i,t){this.setNotices([i]),this.message.setIcon(e).setType(t)};x.prototype.onChange=function(e){!this.urlModeManual&&this.getField().looksLikeExternalLink(e)&&(this.urlMode=v.static.LINK_MODE_EXTERNAL),this.validate(e)};x.prototype.validate=function(e){this.urlMode===v.static.LINK_MODE_INTERNAL&&e!==""?(this.setMessage("error",V("wikieditor-toolbar-tool-link-int-target-status-invalid").parse(),"error"),this.emit("invalid")):(this.setNotices([]),this.emit("change",e))};x.prototype.onSelect=function(e){let i,t;this.urlMode===v.static.LINK_MODE_EXTERNAL||!this.urlModeManual&&this.urlMode===v.static.LINK_MODE_INTERNAL&&e.isExternal()?(i="linkExternal",t="wikieditor-toolbar-tool-link-int-target-status-external"):e.isDisambiguation()?(i="articleDisambiguation",t="wikieditor-toolbar-tool-link-int-target-status-disambig"):!e.isMissing()&&!e.isExternal()?(i="article",t="wikieditor-toolbar-tool-link-int-target-status-exists"):(i="articleNotFound",t="wikieditor-toolbar-tool-link-int-target-status-notexists"),this.setMessage(i,V(t).parse())};pe.exports=x});var we=_((Qe,be)=>{var ke=y().i18n;function T(){let e=new OO.ui.TextInputWidget({placeholder:ke("wikieditor-toolbar-tool-link-int-text-tooltip")});e.connect(this,{change:"onInputChange"});let i={align:"top",label:ke("wikieditor-toolbar-tool-link-int-text"),classes:["mw-wikiEditor-InsertLink-LinkTextField"]};T.super.call(this,e,i),this.touched=!1}s(T,"LinkTextField");OO.inheritClass(T,OO.ui.FieldLayout);T.prototype.setValueIfUntouched=function(e){this.touched||this.getField().setValue(e)};T.prototype.setTouched=function(e){this.touched=e};T.prototype.onInputChange=function(){$.contains(this.$element[0],document.activeElement)&&(this.touched=!0)};be.exports=T});var ge=_((Ze,he)=>{var b=y().i18n,H=K(),Oe=ue(),Se=we(),M=z(),m=new Oe,L=new Se,A=new M,j=B();function N(e){let i=e.data("dialogaction"),t=i?$(i):e.find("button").first();t&&t.trigger("click")}s(N,"triggerButtonClick");he.exports={replaceIcons:s(function(e){e.wikiEditor("addToToolbar",{section:"main",group:"insert",tools:{link:{label:b("wikieditor-toolbar-tool-link"),type:"button",oouiIcon:"link",action:{type:"dialog",module:"insert-link"},hotkey:75},file:{label:b("wikieditor-toolbar-tool-file"),type:"button",oouiIcon:"image",action:{type:"dialog",module:"insert-file"}}}}).wikiEditor("addToToolbar",{section:"advanced",group:"insert",tools:{table:{label:b("wikieditor-toolbar-tool-table"),type:"button",oouiIcon:"table",action:{type:"dialog",module:"insert-table"}}}}).wikiEditor("addToToolbar",{section:"secondary",group:"default",tools:{replace:{label:b("wikieditor-toolbar-tool-replace"),type:"button",oouiIcon:"articleSearch",action:{type:"dialog",module:"search-and-replace"}}}})},"replaceIcons"),getDefaultConfig:s(function(){return{dialogs:{"insert-link":{title:b("wikieditor-toolbar-tool-link-title"),id:"wikieditor-toolbar-link-dialog",html:$("<fieldset>").append(m.$element,L.$element,A.$element),init:s(function(){let e=s(function(i){$(".wikieditor-toolbar-tool-link-insert").button("option","disabled",!i)},"setButtonState");m.connect(this,{change:s(function(i){A.setIsExternal(m.isExternal()),L.setValueIfUntouched(i),e(i!=="")},"change"),invalid:s(function(){e(!1)},"invalid")}),A.connect(this,{change:s(function(i){let t=i?M.static.LINK_MODE_EXTERNAL:M.static.LINK_MODE_INTERNAL;m.setUrlMode(t)},"change")})},"init"),dialog:{width:500,dialogClass:"wikiEditor-toolbar-dialog",buttons:{"wikieditor-toolbar-tool-link-insert":{class:"wikieditor-toolbar-tool-link-insert",text:b("wikieditor-toolbar-tool-link-insert"),click:s(function(){function e(r){return r.replace(/(\]{2,})/g,"<nowiki>$1</nowiki>")}s(e,"escapeInternalText");function i(r){return r.replace(/ /g,"%20").replace(/\[/g,"%5B").replace(/\]/g,"%5D")}s(i,"escapeExternalTarget");function t(r){return r.replace(/(\]+)/g,"<nowiki>$1</nowiki>")}if(s(t,"escapeExternalText"),$(".wikieditor-toolbar-tool-link-insert").button("option","disabled"))return;let l=m.getField().getValue(),o=L.getField().getValue();o.trim()===""&&(o="");let a="";if(A.isInternal())l===o||!o.length?a="[["+l+"]]":a="[["+l+"|"+e(o)+"]]";else{l=l.trim(),new RegExp("^(?:http|https|ftp|sftp).").test(l)||(l="http://"+l);let r=l.match($(this).data("articlePathRegex"));if(r&&!$(this).data("ignoreLooksInternal")){let c={},k=this;c[b("wikieditor-toolbar-tool-link-lookslikeinternal-int")]=function(){let g=r[1];try{g=decodeURI(g)}catch{}m.getField().setValue(g),m.setUrlMode(M.static.LINK_MODE_INTERNAL),$(this).dialog("close"),m.getField().selectFirstMatch()},c[b("wikieditor-toolbar-tool-link-lookslikeinternal-ext")]=function(){$(k).data("ignoreLooksInternal",!0),$(k).closest(".ui-dialog").find("button").first().trigger("click"),$(k).data("ignoreLooksInternal",!1),$(this).dialog("close")},$.wikiEditor.modules.dialogs.quickDialog(b("wikieditor-toolbar-tool-link-lookslikeinternal",r[1]),{buttons:c});return}let d=i(l),p=t(o);d===p&&!l.startsWith("//")?a=d:o===""?a="["+d+"]":a="["+d+" "+p+"]"}let n=$("#wikieditor-toolbar-link-dialog").data("whitespace");n&&(a=n[0]+a+n[1]),$(this).dialog("close"),H.fn.doAction($(this).data("context"),{type:"replace",options:{pre:a}},$(this)),m.reset(),L.getField().setValue(""),A.getField().selectItem(null)},"click")},"wikieditor-toolbar-tool-link-cancel":s(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-link-cancel")},open:s(function(){let e="example";$(this).data("articlePathRegex",new RegExp("^https?://"+escape(e+"").replace(/\\\$1/g,"(.*)")+"$"));let t=$(this).data("context").$textarea.textSelection("getSelection");if(m.getField().focus(),m.getField().emit("change",m.getField().getValue()),$("#wikieditor-toolbar-link-dialog").data("whitespace",["",""]),t!==""){let o,a,n,r;if((o=t.match(/^(\s*)\[\[([^\]|]+)(\|([^\]|]*))?\]\](\s*)$/))?(a=o[2],n=o[4]?o[4]:o[2],r=!1,$("#wikieditor-toolbar-link-dialog").data("whitespace",[o[1],o[5]])):(o=t.match(/^(\s*)\[([^\] ]+)( ([^\]]+))?\](\s*)$/))?(a=o[2],n=o[4]||"",r=!0,$("#wikieditor-toolbar-link-dialog").data("whitespace",[o[1],o[5]])):(a=n=t.trim(),a.length<t.length&&$("#wikieditor-toolbar-link-dialog").data("whitespace",[t.slice(0,t.indexOf(a.charAt(0))),t.slice(t.lastIndexOf(a.charAt(a.length-1))+1)])),typeof a<"u"&&m.getField().setValue(a),typeof n<"u"&&L.getField().setValue(n),L.setTouched(!0),typeof r<"u"){let d=r?M.static.LINK_MODE_EXTERNAL:M.static.LINK_MODE_INTERNAL;m.setUrlMode(d)}}let l=$(this).closest(".ui-dialog");l.removeData("dialogaction"),$(this).data("dialogkeypressset")||($(this).data("dialogkeypressset",!0),l.on("keypress",o=>{(o.keyCode||o.which)===13&&(N(l),o.preventDefault())}),l.find("button").on("focus",o=>{l.data("dialogaction",o.delegateTarget)}))},"open")}},"insert-file":{title:b("wikieditor-toolbar-tool-file-title"),id:"wikieditor-toolbar-file-dialog",htmlTemplate:"dialogInsertFile.html",init:s(function(){let e=j.magicWords;$(this).find("[data-i18n-magic]").text(function(){return e[$(this).attr("data-i18n-magic")][0]}).removeAttr("data-i18n-magic");let i=b("wikieditor-toolbar-file-default");$(this).find("#wikieditor-toolbar-file-size").attr("placeholder",i).attr("size",i.length),$(this).find("[rel]").text(function(){return b($(this).attr("rel"))}).removeAttr("rel");let t=b("wikieditor-toolbar-file-alt-help"),l=b("wikieditor-toolbar-file-alt-help-label"),o=$(this).find(".wikieditor-toolbar-file-alt-help").text(l).on("click",()=>{o.text((a,n)=>n===l?t:l)})},"init"),dialog:{resizable:!1,dialogClass:"wikiEditor-toolbar-dialog",width:590,buttons:{"wikieditor-toolbar-tool-file-insert":s(function(){let e=/.+px$/,i=j.magicWords,t=$("#wikieditor-toolbar-file-target").val(),l=$("#wikieditor-toolbar-file-caption").val(),o=$("#wikieditor-toolbar-file-alt").val(),a=$("#wikieditor-toolbar-file-float").val(),n=$("#wikieditor-toolbar-file-format").val(),r=$("#wikieditor-toolbar-file-size").val(),d=$("#wikieditor-toolbar-file-dialog").data("whitespace");if(r!==""&&!e.test(r)&&(r+="px"),t!==""){let k=`File:${t}`;k&&k.getNamespaceId()!==6&&(k=`File:${t}`),k&&(t=k)}let p=[r,n,a];p=p.filter(k=>k.length&&k!=="default"),o.length&&p.push(i.img_alt[0].replace("$1",o)),l.length&&p.push(l);let c=p.length===0?t:t+"|"+p.join("|");$(this).dialog("close"),H.fn.doAction($(this).data("context"),{type:"replace",options:{pre:d[0]+"[[",peri:c,post:"]]"+d[1],ownline:!0}},$(this)),$(["#wikieditor-toolbar-file-target","#wikieditor-toolbar-file-caption","#wikieditor-toolbar-file-alt","#wikieditor-toolbar-file-size"].join(",")).val(""),$("#wikieditor-toolbar-file-float").val("default"),$("#wikieditor-toolbar-file-format").val(i.img_thumbnail[0])},"wikieditor-toolbar-tool-file-insert"),"wikieditor-toolbar-tool-file-cancel":s(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-file-cancel"),"wikieditor-toolbar-tool-file-upload":s(function(){OO.ui.alert("Unsupported!")},"wikieditor-toolbar-tool-file-upload")},open:s(function(){let e=j.magicWords,i={pre:"",post:"",fileName:"",caption:"",fileAlt:"",fileSize:"",fileFloat:"default",fileFormat:e.img_thumbnail[0]},t=s(function(a){if(a.includes(""))return!1;let r=/^(\s*)\[\[(.*)\]\](\s*)$/.exec(a);if(!r)return!1;let d=r[2].replace(/\[\[[^[\]]*\]\]|\{\{[^{}]\}\}/g,k=>k.replace(/\|/g,"")).split("|"),p=d[0];if(!p||p.getNamespaceId()!==6)return!1;let c={pre:r[1],post:r[3],fileName:p.getMainText()};for(let k=1;k<d.length;k++){let g=d[k],w=g.toLowerCase();if(e.img_right.includes(w))c.fileFloat=e.img_right[0];else if(e.img_left.includes(w))c.fileFloat=e.img_left[0];else if(e.img_none.includes(w))c.fileFloat=e.img_none[0];else if(e.img_center.includes(w))c.fileFloat=e.img_center[0];else if(e.img_thumbnail.includes(w))c.fileFormat=e.img_thumbnail[0];else if(e.img_framed.includes(w))c.fileFormat=e.img_framed[0];else if(e.img_frameless.includes(w))c.fileFormat=e.img_frameless[0];else if(e.img_alt.includes(w.split("=",2)[0]+"=$1"))c.fileAlt=g.split("=",2)[1];else if(/.+px$/.test(w))c.fileSize=w.replace(/px$/,"");else{if(w==="")continue;if(k===d.length-1)c.caption=g.replace(new RegExp(escape(""),"g"),"|");else return!1}}return c.fileFormat||(c.fileFormat="default"),c},"parseFileSyntax"),o=$(this).data("context").$textarea.textSelection("getSelection");if(o!==""&&Object.assign(i,t(o)),$("#wikieditor-toolbar-file-dialog").data("whitespace",[i.pre,i.post]),$("#wikieditor-toolbar-file-target").val(i.fileName),$("#wikieditor-toolbar-file-caption").val(i.caption),$("#wikieditor-toolbar-file-alt").val(i.fileAlt),$("#wikieditor-toolbar-file-float").val(i.fileFloat),$("#wikieditor-toolbar-file-format").val(i.fileFormat),$("#wikieditor-toolbar-file-size").val(i.fileSize),$("#wikieditor-toolbar-file-target").trigger("focus"),!$(this).data("dialogkeypressset")){$(this).data("dialogkeypressset",!0);let a=$(this).closest(".ui-dialog");a.on("keypress",n=>{n.which===13&&(N(a),n.preventDefault())}),a.find("button").on("focus",n=>{a.data("dialogaction",n.delegateTarget)})}},"open")}},"insert-table":{title:b("wikieditor-toolbar-tool-table-title"),id:"wikieditor-toolbar-table-dialog",htmlTemplate:"dialogInsertTable.html",init:s(function(){$(this).find("[rel]").each(function(){$(this).text(b($(this).attr("rel")))}),$("#wikieditor-toolbar-table-dimensions-rows").val(3),$("#wikieditor-toolbar-table-dimensions-columns").val(3),$("#wikieditor-toolbar-table-wikitable").on("click",()=>{$(".wikieditor-toolbar-table-preview").toggleClass("wikitable")}),$("#wikieditor-toolbar-table-preview").clone().attr("id","wikieditor-toolbar-table-preview2").addClass("sortable").insertAfter($("#wikieditor-toolbar-table-preview")).hide(),($("#wikieditor-toolbar-table-preview2").tablesorter??(()=>{}))(),$("#wikieditor-toolbar-table-sortable").on("click",()=>{$("#wikieditor-toolbar-table-preview").hide().attr("id","wikieditor-toolbar-table-preview3"),$("#wikieditor-toolbar-table-preview2").attr("id","wikieditor-toolbar-table-preview").show(),$("#wikieditor-toolbar-table-preview3").attr("id","wikieditor-toolbar-table-preview2")}),$("#wikieditor-toolbar-table-dimensions-header").on("click",()=>{let e=$(".wikieditor-toolbar-table-preview-header").html(),i=$(".wikieditor-toolbar-table-preview-hidden").html();$(".wikieditor-toolbar-table-preview-header").html(i),$(".wikieditor-toolbar-table-preview-hidden").html(e),($("#wikieditor-toolbar-table-preview, #wikieditor-toolbar-table-preview2").filter(".sortable").tablesorter??(()=>{}))()})},"init"),dialog:{resizable:!1,dialogClass:"wikiEditor-toolbar-dialog",width:590,buttons:{"wikieditor-toolbar-tool-table-insert":s(function(){let e=$("#wikieditor-toolbar-table-dimensions-rows").val(),i=$("#wikieditor-toolbar-table-dimensions-columns").val(),t=parseInt(e,10),l=parseInt(i,10),o=$("#wikieditor-toolbar-table-dimensions-header").prop("checked")?1:0;if(isNaN(t)||isNaN(l)||String(t)!==e||String(l)!==i||e<0||i<0){alert(b("wikieditor-toolbar-tool-table-invalidnumber"));return}if(t+o===0||l===0){alert(b("wikieditor-toolbar-tool-table-zero"));return}if(t*l>1e3){alert(b("wikieditor-toolbar-tool-table-toomany","1000"));return}let a=b("wikieditor-toolbar-tool-table-example-caption"),n=b("wikieditor-toolbar-tool-table-example-header"),r=b("wikieditor-toolbar-tool-table-example"),d="";d+="|+ "+a+`
`;for(let k=0;k<t+o;k++){d+=`|-
`;for(let g=0;g<l;g++){let w=o&&k===0,C=w?"!":"|";g>0&&(C+=C),d+=C+" "+(w?n:r)+" "}d=d.slice(0,d.length-1)+`
`}let p=[];$("#wikieditor-toolbar-table-wikitable").is(":checked")&&p.push("wikitable"),$("#wikieditor-toolbar-table-sortable").is(":checked")&&p.push("sortable");let c=p.length>0?' class="'+p.join(" ")+'"':"";$(this).dialog("close"),H.fn.doAction($(this).data("context"),{type:"replace",options:{pre:"{|"+c+`
`,peri:d,post:"|}",ownline:!0}},$(this)),$("#wikieditor-toolbar-table-dimensions-rows").val(3),$("#wikieditor-toolbar-table-dimensions-columns").val(3),$("#wikieditor-toolbar-table-dimensions-header").is(":checked")||$("#wikieditor-toolbar-table-dimensions-header").trigger("click"),$("#wikieditor-toolbar-table-wikitable").is(":checked")||$("#wikieditor-toolbar-table-wikitable").trigger("click"),$("#wikieditor-toolbar-table-sortable").is(":checked")&&$("#wikieditor-toolbar-table-sortable").trigger("click")},"wikieditor-toolbar-tool-table-insert"),"wikieditor-toolbar-tool-table-cancel":s(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-table-cancel")},open:s(function(){$("#wikieditor-toolbar-table-dimensions-rows").trigger("focus");let e=$(this).closest(".ui-dialog");e.removeData("dialogaction"),$(this).data("dialogkeypressset")||($(this).data("dialogkeypressset",!0),e.on("keypress",i=>{(i.keyCode||i.which)===13&&(N(e),i.preventDefault())}),e.find("button").on("focus",i=>{e.data("dialogaction",i.delegateTarget)}))},"open")}},"search-and-replace":{title:b("wikieditor-toolbar-tool-replace-title"),id:"wikieditor-toolbar-replace-dialog",htmlTemplate:"dialogReplace.html",init:s(function(){$(this).find("[rel]").each(function(){$(this).text(b($(this).attr("rel")))}),$(this).data("replaceCallback",e=>{$("#wikieditor-toolbar-replace-nomatch, #wikieditor-toolbar-replace-success, #wikieditor-toolbar-replace-emptysearch, #wikieditor-toolbar-replace-invalidregex").hide();let i=$("#wikieditor-toolbar-replace-search").val();if(i===""){$("#wikieditor-toolbar-replace-emptysearch").show();return}let t=$("#wikieditor-toolbar-replace-replace").val(),l="m";$("#wikieditor-toolbar-replace-case").is(":checked")||(l+="i");let a=$("#wikieditor-toolbar-replace-regex").is(":checked");a||(i=escape(i)),$("#wikieditor-toolbar-replace-word").is(":checked")&&(i="\\b(?:"+i+")\\b"),e==="replaceAll"&&(l+="g");let r;try{r=new RegExp(i,l)}catch(w){$("#wikieditor-toolbar-replace-invalidregex").text(b("wikieditor-toolbar-tool-replace-invalidregex",w.message)).show();return}let d=$(this).data("context").$textarea,p=d.textSelection("getContents"),c=!1,k,g;if(e!=="replaceAll"&&(k=$(this).data(e==="replace"?"matchIndex":"offset"),g=p.slice(k),c=g.match(r)),c||(k=0,g=p,c=g.match(r)),!c)$("#wikieditor-toolbar-replace-nomatch").show();else if(e==="replaceAll")d.textSelection("setContents",p.replace(r,t)),$("#wikieditor-toolbar-replace-success").text(b("wikieditor-toolbar-tool-replace-success",c.length)).show(),$(this).data("offset",0);else{if(e==="replace"){let F;a?F=c[0].replace(r,t):F=t,c&&(d.textSelection("encapsulateSelection",{peri:F,replace:!0,selectionStart:k+c.index,selectionEnd:k+c.index+c[0].length,selectPeri:!0}),p=d.textSelection("getContents")),k=k+c.index+F.length,g=p.slice(k),c=g.match(r),c||(k=0,g=p,c=g.match(r)),c||(c={index:0,0:{length:0}})}let w=k+c.index,C=w+c[0].length;$(this).data("matchIndex",w),d.textSelection("setSelection",{start:w,end:C}),d.textSelection("scrollToCaretPosition"),$(this).data("offset",C),d[0].focus()}})},"init"),dialog:{width:500,dialogClass:"wikiEditor-toolbar-dialog",modal:!1,buttons:{"wikieditor-toolbar-tool-replace-button-findnext":s(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"find")},"wikieditor-toolbar-tool-replace-button-findnext"),"wikieditor-toolbar-tool-replace-button-replace":s(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"replace")},"wikieditor-toolbar-tool-replace-button-replace"),"wikieditor-toolbar-tool-replace-button-replaceall":s(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"replaceAll")},"wikieditor-toolbar-tool-replace-button-replaceall"),"wikieditor-toolbar-tool-replace-close":s(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-replace-close")},open:s(function(){$(this).data({offset:0,matchIndex:0});let e=$(this).closest(".ui-dialog");$("#wikieditor-toolbar-replace-search").trigger("focus"),$("#wikieditor-toolbar-replace-nomatch, #wikieditor-toolbar-replace-success, #wikieditor-toolbar-replace-emptysearch, #wikieditor-toolbar-replace-invalidregex").hide(),$(this).data("onetimeonlystuff")||($(this).data("onetimeonlystuff",!0),e.on("keypress",t=>{(t.keyCode||t.which)===13&&(N(e),t.preventDefault())}),e.find("button").on("focus",t=>{e.data("dialogaction",t.delegateTarget)}));let i=$(this).data("context").$textarea;i.on("keypress.srdialog",t=>{t.which===13?(N(i),t.preventDefault()):t.which===27&&$(this).dialog("close")})},"open"),close:s(function(){$(this).data("context").$textarea.off("keypress.srdialog"),$(this).closest(".ui-dialog").data("dialogaction",!1)},"close")}}}}},"getDefaultConfig")}});var X;ee();function fe(e,i){e&&void 0;let t;e&&i?t="switchnochange":e?t="switchwithout":i?t="nochange":t="abandon"}s(fe,"logAbort");$(()=>{let e=$("#wpTextbox1"),i=$("#editingStatsId"),t=e.val();if($("#wikieditorUsed").val("yes"),i.length){if(X=i.val(),window.performance&&window.performance.timing){let n=Date.now();n-window.performance.timing.navigationStart,e.on("wikiEditor-toolbar-doneInitialSections",()=>{Date.now()-window.performance.timing.navigationStart}).one("input",()=>{Date.now()-n})}let l=e.closest("form");localStorage.get("wikieditor-uselivepreview")&&l.find("#wpPreview").on("click",()=>{});let o;l.on("submit",()=>{o=!0});let a=window.onunload;window.onunload=function(){let r=$("#ca-ve-edit")[0],d=r&&(document.activeElement===r||$.contains(r,document.activeElement)),p;return a&&(p=a()),o||fe(d,!1),X=Math.floor(Math.random()<<32).toString(16),i.val(X),p},e.on("wikiEditor-switching-visualeditor",()=>{window.onunload=a,fe(!0,!1)})}$("#toolbar").remove()});window.addWikiEditor=function(e){if(e.css("display")==="none")return;e.wikiEditor("addModule",le());let i=ge();i.replaceIcons(e),e.wikiEditor("addModule",i.getDefaultConfig())};})();
