(()=>{var Oe=Object.defineProperty;var n=(e,t)=>Oe(e,"name",{value:t,configurable:!0});var x=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ie=x(()=>{(function(){$.fn.textSelection=function(e,t){function i(){return $(this).data("jquery.textSelection")===void 0&&typeof document.execCommand=="function"&&typeof document.queryCommandSupported=="function"&&document.queryCommandSupported("insertText")}n(i,"supportsInsertText");function l(r,d,p){var c=!1;if(i()&&!($.client.profile().layout==="webkit"&&d.split(`
`).length>100)){r.focus();try{document.activeElement===r&&document.execCommand("insertText",!1,d)&&(c=!0)}catch{}}c||p.call(r,d)}n(l,"execInsertText");var o={getContents:n(function(){return this.val()},"getContents"),setContents:n(function(r){return this.each(function(){var d=this.scrollTop;this.select(),l(this,r,function(){$(this).val(r)}),this.scrollTop=d})},"setContents"),getSelection:n(function(){var r=this.get(0),d;return r?d=r.value.slice(r.selectionStart,r.selectionEnd):d="",d},"getSelection"),replaceSelection:n(function(r){return this.each(function(){l(this,r,function(){var d=$(this).textSelection("getContents"),p=$(this).textSelection("getCaretPosition",{startAndEnd:!0}),c=p[0],u=p[1];$(this).textSelection("setContents",d.slice(0,c)+r+d.slice(u)),$(this).textSelection("setSelection",{start:c,end:c+r.length})})})},"replaceSelection"),encapsulateSelection:n(function(r){return this.each(function(){var d,p,c=r.pre,u=r.post;function b(){if(!d)d=r.peri,p=!0;else if(r.replace)d=r.peri;else{for(;d.charAt(d.length-1)===" ";)d=d.slice(0,-1),u+=" ";for(;d.charAt(0)===" ";)d=d.slice(1),c=" "+c}}n(b,"checkSelectedText");function k(Ce,Te,Ie){for(var V="",z=Ce.split(`
`),W=0;W<z.length;W++)V+=Te+z[W]+Ie,W!==z.length-1&&(V+=`
`);return V}n(k,"doSplitLines"),p=!1,$(this).trigger("focus"),r.selectionStart!==void 0&&$(this).textSelection("setSelection",{start:r.selectionStart,end:r.selectionEnd}),d=$(this).textSelection("getSelection");var _=$(this).textSelection("getContents"),I=$(this).textSelection("getCaretPosition",{startAndEnd:!0}),S=I[0],q=I[1];b();var te=!1;r.selectionStart!==void 0&&q-S!==r.selectionEnd-r.selectionStart&&(S=r.selectionStart,te=!0);var O=c+d+u;r.splitlines&&(O=k(d,c,u)),r.ownline&&(S!==0&&_.charAt(S-1)!==`
`&&_.charAt(S-1)!=="\r"&&(O=`
`+O,c+=`
`),_.charAt(q)!==`
`&&_.charAt(q)!=="\r"&&(O+=`
`,u+=`
`)),te?$(this).textSelection("setContents",_.slice(0,S)+O+_.slice(q)):$(this).textSelection("replaceSelection",O),p&&r.selectPeri&&(!r.splitlines||r.splitlines&&d.indexOf(`
`)===-1)?$(this).textSelection("setSelection",{start:S+c.length,end:S+c.length+d.length}):$(this).textSelection("setSelection",{start:S+O.length}),$(this).trigger("encapsulateSelection",[r.pre,r.peri,r.post,r.ownline,r.replace,r.splitlines])})},"encapsulateSelection"),getCaretPosition:n(function(r){function d(p){var c=0,u=0;return p&&(c=p.selectionStart,u=p.selectionEnd),r.startAndEnd?[c,u]:c}return n(d,"getCaret"),d(this.get(0))},"getCaretPosition"),setSelection:n(function(r){return this.each(function(){r.start>this.selectionEnd?(this.selectionEnd=r.end,this.selectionStart=r.start):(this.selectionStart=r.start,this.selectionEnd=r.end)})},"setSelection"),scrollToCaretPosition:n(function(r){return this.each(function(){var d=this.clientHeight,p=this.value,c=this.selectionStart,u=this.selectionEnd,b=this.scrollTop;this.value=this.value.slice(0,this.selectionEnd),this.scrollTop=this.scrollHeight;var k=this.scrollTop;this.value=p,this.selectionStart=c,this.selectionEnd=u,r.force||k<b&&b-k<d&&(k=b),this.scrollTop=k,$(this).trigger("scrollToPosition")})},"scrollToCaretPosition")},a=$(this).data("jquery.textSelection");switch(e){case"encapsulateSelection":t=$.extend({pre:"",peri:"",post:"",ownline:!1,replace:!1,selectPeri:!0,splitlines:!1,selectionStart:void 0,selectionEnd:void 0},t);break;case"getCaretPosition":t=$.extend({startAndEnd:!1},t);break;case"setSelection":t=$.extend({start:void 0,end:void 0},t),t.end===void 0&&(t.end=t.start);break;case"scrollToCaretPosition":t=$.extend({force:!1},t);break;case"register":if(a)throw new Error("Another textSelection API was already registered");$(this).data("jquery.textSelection",t);return;case"unregister":$(this).removeData("jquery.textSelection");return}var s=(a&&a[e]||o[e]).call(this,t);return s}})()});var v=x((ze,oe)=>{var Le={"@metadata":{authors:["Anakmalaysia","Anarkiisto","Bencmq","Diskdance","Fantasticfears","Gaoxuewei","GuoPC","Hydra","Lakejason0","Lantx","Liangent","LittlePaw365","Liuxinyu970226","Onecountry","PhiLiP","Shirayuki","Shizhao","Simon Shek","Stang","Tranve","VulpesVulpes825","Winston Sung","Xiaomingyan","Zhang8569","\u5217\u7EF4\u52B3\u5FB7","\u6C88\u6F84\u5FC3","\u94C1\u6876"]},wikieditor:"\u9AD8\u7EA7wikitext\u7F16\u8F91\u754C\u9762","wikieditor-desc":"\u63D0\u4F9B\u9AD8\u7EA7\u3001\u53EF\u6269\u5C55\u7684wikitext\u7F16\u8F91\u754C\u9762","wikieditor-toolbar":"\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-desc":"\u6709\u589E\u5F3A\u7684\u4F7F\u7528\u6027\u80FD\u7684\u9875\u9762\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-preference":"\u542F\u7528\u7F16\u8F91\u5DE5\u5177\u680F","wikieditor-toolbar-preference-help":"\u6B64\u529F\u80FD\u6709\u65F6\u79F0\u4F5C\u201C2010\u5E74\u7248wikitext\u7F16\u8F91\u5668\u201D\u3002","wikieditor-toolbar-tool-bold":"\u7C97\u4F53","wikieditor-toolbar-tool-bold-example":"\u7C97\u4F53\u6587\u672C","wikieditor-toolbar-tool-italic":"\u659C\u4F53","wikieditor-toolbar-tool-italic-example":"\u659C\u4F53\u6587\u672C","wikieditor-toolbar-tool-link":"\u94FE\u63A5","wikieditor-toolbar-tool-link-title":"\u63D2\u5165\u94FE\u63A5","wikieditor-toolbar-tool-link-int":"\u94FE\u5F80wiki\u9875\u9762","wikieditor-toolbar-tool-link-int-target":"\u76EE\u6807\u9875\u9762\u6216\u7F51\u5740\uFF1A","wikieditor-toolbar-tool-link-int-target-tooltip":"\u9875\u9762\u7684\u6807\u9898\u6216URL","wikieditor-toolbar-tool-link-int-text":"\u663E\u793A\u6587\u672C\uFF1A","wikieditor-toolbar-tool-link-int-text-tooltip":"\u8981\u663E\u793A\u7684\u6587\u672C","wikieditor-toolbar-tool-link-ext":"\u94FE\u5F80\u5916\u90E8\u7F51\u9875","wikieditor-toolbar-tool-link-ext-target":"\u94FE\u63A5\u7F51\u5740\uFF1A","wikieditor-toolbar-tool-link-ext-text":"\u94FE\u63A5\u6587\u672C\uFF1A","wikieditor-toolbar-tool-link-insert":"\u63D2\u5165\u94FE\u63A5","wikieditor-toolbar-tool-link-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-link-int-target-status-exists":"{{SITENAME}}\u4E0A\u5B58\u5728\u8BE5\u9875\u9762","wikieditor-toolbar-tool-link-int-target-status-notexists":"\u8BE5\u9875\u9762\u5728 {{SITENAME}} \u4E0A\u4E0D\u5B58\u5728","wikieditor-toolbar-tool-link-int-target-status-invalid":"\u60A8\u6307\u5B9A\u7684\u6807\u9898\u65E0\u6548","wikieditor-toolbar-tool-link-int-target-status-external":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-link-int-target-status-disambig":"\u6B64\u9875\u9762\u4E0D\u662F\u4E00\u4E2A\u5185\u5BB9\u9875\u9762\uFF0C\u800C\u662F\u4E00\u4E2A\u5217\u51FA\u4E86\u5177\u6709\u76F8\u4F3C\u540D\u79F0\u4E3B\u9898\u7684\u5217\u8868","wikieditor-toolbar-tool-link-lookslikeinternal":`\u60A8\u8F93\u5165\u7684\u7F51\u5740\u4F3C\u4E4E\u6307\u5411\u53E6\u4E00\u4E2Awiki\u9875\u9762\u3002
\u662F\u5426\u5E0C\u671B\u5C06\u5176\u6539\u4E3A\u5185\u90E8\u94FE\u63A5\uFF1F`,"wikieditor-toolbar-tool-link-lookslikeinternal-int":"\u5185\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-link-lookslikeinternal-ext":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-tool-file":"\u56FE\u7247\u548C\u5A92\u4F53","wikieditor-toolbar-tool-file-title":"\u63D2\u5165\u6587\u4EF6","wikieditor-toolbar-file-target":"\u6587\u4EF6\u540D\uFF1A","wikieditor-toolbar-file-caption":"\u6807\u9898\uFF1A","wikieditor-toolbar-file-alt":"\u53EF\u66FF\u4EE3\u6587\u672C","wikieditor-toolbar-file-alt-help":"\u60A8\u53EF\u4EE5\u7528\u6B64\u53EF\u9009\u533A\u57DF\u6765\u4E3A\u90A3\u4E9B\u4E0D\u80FD\u770B\u89C1\u9879\u76EE\u7684\u4EBA\u4EEC\u5199\u4E00\u6BB5\u6587\u5B57\u63CF\u8FF0\u3002\u8FD9\u6BB5\u63CF\u8FF0\u5E94\u8BE5\u8BA9\u4ED6\u4EEC\u8DB3\u591F\u7406\u89E3\u5A92\u4F53\u9879\u76EE\u63D0\u4F9B\u7684\u76EE\u7684\u548C\u4FE1\u606F\u3002\u8FD9\u5BF9\u4E8E\u76F2\u4EBA\u7528\u6237\u548C\u5176\u4ED6\u4F7F\u7528\u5C4F\u5E55\u9605\u8BFB\u5668\u8F6F\u4EF6\u6216\u7EAF\u6587\u672C\u6D4F\u89C8\u5668\u7684\u4EBA\u4EEC\u6765\u8BF4\u662F\u81F3\u5173\u91CD\u8981\u7684\u3002","wikieditor-toolbar-file-alt-help-label":"\uFF08\u663E\u793A\u5E2E\u52A9\uFF09","wikieditor-toolbar-file-size":"\u5C3A\u5BF8\uFF1A","wikieditor-toolbar-file-float":"\u5BF9\u9F50\uFF1A","wikieditor-toolbar-file-default":"\uFF08\u9ED8\u8BA4\uFF09","wikieditor-toolbar-file-format":"\u683C\u5F0F\uFF1A","wikieditor-toolbar-file-format-none":"\u65E0","wikieditor-toolbar-tool-file-insert":"\u63D2\u5165","wikieditor-toolbar-tool-file-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-file-upload":"\u4E0A\u4F20","wikieditor-toolbar-tool-signature":"\u7B7E\u540D\u53CA\u65F6\u95F4\u6233","wikieditor-toolbar-section-advanced":"\u9AD8\u7EA7","wikieditor-toolbar-tool-heading":"\u6807\u9898","wikieditor-toolbar-tool-heading-1":"1\u7EA7","wikieditor-toolbar-tool-heading-2":"2\u7EA7","wikieditor-toolbar-tool-heading-3":"3\u7EA7","wikieditor-toolbar-tool-heading-4":"4\u7EA7","wikieditor-toolbar-tool-heading-5":"5\u7EA7","wikieditor-toolbar-tool-heading-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-group-format":"\u683C\u5F0F","wikieditor-toolbar-tool-ulist":"\u65E0\u5E8F\u5217\u8868","wikieditor-toolbar-tool-ulist-example":"\u65E0\u5E8F\u5217\u8868\u9879","wikieditor-toolbar-tool-olist":"\u6709\u5E8F\u5217\u8868","wikieditor-toolbar-tool-olist-example":"\u6709\u5E8F\u5217\u8868\u9879","wikieditor-toolbar-tool-code":"\u4EE3\u7801","wikieditor-toolbar-tool-code-example":"\u4EE3\u7801","wikieditor-toolbar-tool-nowiki":"\u975Ewiki\u683C\u5F0F","wikieditor-toolbar-tool-nowiki-example":"\u8BF7\u5728\u8FD9\u91CC\u63D2\u5165\u975E\u683C\u5F0F\u5316\u6587\u672C","wikieditor-toolbar-tool-redirect":"\u91CD\u5B9A\u5411","wikieditor-toolbar-tool-redirect-example":"\u76EE\u6807\u9875\u9762\u540D\u79F0","wikieditor-toolbar-tool-big":"\u5927\u53F7","wikieditor-toolbar-tool-big-example":"\u5927\u53F7\u6587\u672C","wikieditor-toolbar-tool-small":"\u5C0F\u53F7","wikieditor-toolbar-tool-small-example":"\u5C0F\u53F7\u6587\u672C","wikieditor-toolbar-tool-superscript":"\u4E0A\u6807","wikieditor-toolbar-tool-superscript-example":"\u4E0A\u6807\u6587\u672C","wikieditor-toolbar-tool-subscript":"\u4E0B\u6807","wikieditor-toolbar-tool-subscript-example":"\u4E0B\u6807\u6587\u672C","wikieditor-toolbar-group-insert":"\u63D2\u5165","wikieditor-toolbar-tool-gallery":"\u56FE\u5E93","wikieditor-toolbar-tool-gallery-example":`\u793A\u4F8B.jpg|\u8BF4\u660E1
\u793A\u4F8B.jpg|\u8BF4\u660E2`,"wikieditor-toolbar-tool-newline":"\u6362\u884C","wikieditor-toolbar-tool-table":"\u8868\u683C","wikieditor-toolbar-tool-table-example-cell-text":"\u5355\u5143\u683C\u6587\u672C","wikieditor-toolbar-tool-table-example-header":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-tool-table-example-caption":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-tool-table-title":"\u63D2\u5165\u8868\u683C","wikieditor-toolbar-tool-table-dimensions-rows":"\u884C\u6570","wikieditor-toolbar-tool-table-dimensions-columns":"\u5217\u6570","wikieditor-toolbar-tool-table-dimensions-header":"\u6DFB\u52A0\u6807\u9898\u884C","wikieditor-toolbar-tool-table-wikitable":"\u663E\u793A\u8FB9\u6846","wikieditor-toolbar-tool-table-sortable":"\u4F7F\u8868\u683C\u5185\u5BB9\u53EF\u6392\u5E8F","wikieditor-toolbar-tool-table-example":"\u793A\u4F8B","wikieditor-toolbar-tool-table-preview":"\u9884\u89C8","wikieditor-toolbar-tool-table-insert":"\u63D2\u5165","wikieditor-toolbar-tool-table-cancel":"\u53D6\u6D88","wikieditor-toolbar-tool-table-toomany":"\u5728\u8FD9\u4E2A\u5BF9\u8BDD\u6846\u4E2D\u65E0\u6CD5\u63D2\u5165\u8D85\u8FC7$1\u4E2A{{PLURAL:$1|\u5355\u5143\u683C}}\u7684\u8868\u683C\u3002","wikieditor-toolbar-tool-table-invalidnumber":"\u60A8\u8F93\u5165\u7684\u884C\u6570\u6216\u5217\u6570\u65E0\u6548\u3002","wikieditor-toolbar-tool-table-zero":"\u60A8\u4E0D\u80FD\u63D2\u5165\u4E00\u4E2A\u96F6\u884C\u6216\u96F6\u5217\u7684\u8868\u683C\u3002","wikieditor-toolbar-tool-replace":"\u67E5\u627E\u548C\u66FF\u6362","wikieditor-toolbar-tool-replace-title":"\u67E5\u627E\u548C\u66FF\u6362","wikieditor-toolbar-tool-replace-search":"\u67E5\u627E\uFF1A","wikieditor-toolbar-tool-replace-replace":"\u66FF\u6362\u4E3A\uFF1A","wikieditor-toolbar-tool-replace-case":"\u533A\u5206\u5927\u5C0F\u5199","wikieditor-toolbar-tool-replace-regex":"\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F","wikieditor-toolbar-tool-replace-button-findnext":"\u67E5\u627E\u4E0B\u4E00\u4E2A","wikieditor-toolbar-tool-replace-button-replace":"\u66FF\u6362","wikieditor-toolbar-tool-replace-button-replaceall":"\u66FF\u6362\u6240\u6709","wikieditor-toolbar-tool-replace-close":"\u5173\u95ED","wikieditor-toolbar-tool-replace-nomatch":"\u6CA1\u6709\u627E\u5230\u4EFB\u4F55\u5339\u914D\u9879\u3002","wikieditor-toolbar-tool-replace-success":"\u5B8C\u6210\u4E86$1\u6B21{{PLURAL:$1|\u66FF\u6362}}\u3002","wikieditor-toolbar-tool-replace-emptysearch":"\u60A8\u6CA1\u6709\u8F93\u5165\u67E5\u627E\u5185\u5BB9\u3002","wikieditor-toolbar-tool-replace-invalidregex":"\u60A8\u8F93\u5165\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u65E0\u6548\uFF1A$1","wikieditor-toolbar-tool-replace-word":"\u5168\u5B57\u5339\u914D","wikieditor-toolbar-section-characters":"\u7279\u6B8A\u5B57\u7B26","wikieditor-toolbar-section-help":"\u5E2E\u52A9","wikieditor-toolbar-help-heading-description":"\u8BF4\u660E","wikieditor-toolbar-help-heading-syntax":"\u8F93\u5165\u5185\u5BB9","wikieditor-toolbar-help-heading-result":"\u8F93\u51FA\u7ED3\u679C","wikieditor-toolbar-help-page-format":"\u683C\u5F0F","wikieditor-toolbar-help-page-link":"\u94FE\u63A5","wikieditor-toolbar-help-page-heading":"\u6807\u9898","wikieditor-toolbar-help-page-list":"\u5217\u8868","wikieditor-toolbar-help-page-file":"\u6587\u4EF6","wikieditor-toolbar-help-page-discussion":"\u8BA8\u8BBA","wikieditor-toolbar-help-content-italic-description":"\u659C\u4F53","wikieditor-toolbar-help-content-italic-example":"\u659C\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-bold-description":"\u7C97\u4F53","wikieditor-toolbar-help-content-bold-example":"\u7C97\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-bolditalic-description":"\u7C97\u659C\u4F53","wikieditor-toolbar-help-content-bolditalic-example":"\u7C97\u659C\u4F53\u6587\u5B57","wikieditor-toolbar-help-content-ilink-description":"\u5185\u90E8\u94FE\u63A5","wikieditor-toolbar-help-content-ilink-example":`[[\u9875\u9762\u6807\u9898]]
[[\u9875\u9762\u6807\u9898|\u94FE\u63A5\u6807\u7B7E]]`,"wikieditor-toolbar-help-content-xlink-description":"\u5916\u90E8\u94FE\u63A5","wikieditor-toolbar-help-content-xlink-example-label":"\u94FE\u63A5\u6587\u672C","wikieditor-toolbar-help-content-heading2-description":"2\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading2-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading3-description":"3\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading3-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading4-description":"4\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading4-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-heading5-description":"5\u7EA7\u6807\u9898","wikieditor-toolbar-help-content-heading5-example":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-ulist-description":"\u65E0\u5E8F\u5217\u8868","wikieditor-toolbar-help-content-ulist-example":"\u5217\u8868\u9879\u76EE","wikieditor-toolbar-help-content-olist-description":"\u6709\u5E8F\u5217\u8868","wikieditor-toolbar-help-content-olist-example":"\u5217\u8868\u9879\u76EE","wikieditor-toolbar-help-content-file-description":"\u5D4C\u5165\u6587\u4EF6","wikieditor-toolbar-help-content-file-syntax":"[[$1:Example.png|$2|$3]]","wikieditor-toolbar-help-content-file-caption":"\u6807\u9898\u6587\u672C","wikieditor-toolbar-help-content-signaturetimestamp-description":"\u5E26\u65F6\u95F4\u6233\u7684\u7B7E\u540D","wikieditor-toolbar-help-content-signaturetimestamp-example":"--[[$1:$3|$3]]\uFF08[[$2:$3|\u7559\u8A00]]\uFF09 2023\u5E746\u670829\u65E5 (\u56DB) 15:54 (UTC)","wikieditor-toolbar-help-content-signature-description":"\u7B7E\u540D","wikieditor-toolbar-help-content-signature-example":"[[$1:$3|$3]] ([[$2:$3|\u7559\u8A00]])","wikieditor-toolbar-help-content-signature-username":"\u7528\u6237\u540D","wikieditor-toolbar-help-content-indent-description":"\u7F29\u8FDB","wikieditor-toolbar-help-content-indent1":"\u666E\u901A\u6587\u672C","wikieditor-toolbar-help-content-indent2":"\u7F29\u8FDB\u6587\u672C","wikieditor-toolbar-help-content-indent3":"\u7F29\u8FDB\u6587\u672C","tag-wikieditor-description":"\u901A\u8FC7[[mw:Special:MyLanguage/Extension:WikiEditor|WikiEditor]]\uFF082010\u5E74\u7248wikitext\u7F16\u8F91\u5668\uFF09\u505A\u51FA\u7684\u7F16\u8F91","wikieditor-realtimepreview-preview":"\u9884\u89C8","wikieditor-realtimepreview-error":"\u672A\u80FD\u52A0\u8F7D\u9884\u89C8","wikieditor-realtimepreview-reload":"\u91CD\u65B0\u52A0\u8F7D","wikieditor-realtimepreview-reload-title":"\u91CD\u65B0\u52A0\u8F7D\u5B9E\u65F6\u9884\u89C8\u7A97\u683C","wikieditor-realtimepreview-manual":"\u8BF7\u7ACB\u5373\u91CD\u65B0\u52A0\u8F7D\u4EE5\u624B\u52A8\u9884\u89C8\u60A8\u7684\u7F16\u8F91\u3002"};oe.exports={i18n:n(function(e){let t={__content:Le[e],params:n(function(){let i=Array.from(arguments);return i.length==1&&typeof i[0]=="object"?Object.keys(i[0]).forEach(l=>{t.__content=t.__content.replaceAll(`$${l}`,i[0][l])}):i.forEach((l,o)=>{t.__content=t.__content.replaceAll(`$${o+1}`,l)}),t},"params"),plain:n(function(){return t.__content},"plain"),escaped:n(function(){return escape(t.plain())},"escaped")};return t.text=t.plain,t.toString=t.plain,t.toLocaleString=t.plain,Array.from(arguments).length>1&&t.params.apply(t,Array.from(arguments).slice(1,1/0)),t},"i18n")}});var H=x((He,le)=>{var F=v().i18n,j="visualeditor-symbolList-recentlyUsed-specialCharacters",h={api:{addToToolbar:n(function(e,t){for(let i in t)switch(i){case"sections":{let l=e.modules.toolbar.$toolbar.find("div.sections"),o=e.modules.toolbar.$toolbar.find("div.tabs");for(let a in t[i]){if(a==="main"||a==="secondary"){e.modules.toolbar.$toolbar.prepend(h.fn.buildSection(e,a,t[i][a]));continue}l.append(h.fn.buildSection(e,a,t[i][a])),o.append(h.fn.buildTab(e,a,t[i][a]))}break}case"groups":{if(!("section"in t))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section');for(let o in t[i])l.append(h.fn.buildGroup(e,o,t[i][o]));break}case"tools":{if(!("section"in t&&"group"in t))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section div[rel="'+t.group+'"].group');for(let o in t[i])l.append(h.fn.buildTool(e,o,t[i][o]));l.children().length&&l.removeClass("empty");break}case"pages":{if(!("section"in t))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section .pages'),o=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section .index');for(let a in t[i])l.append(h.fn.buildPage(e,a,t[i][a])),o.append(h.fn.buildBookmark(e,a,t[i][a]));h.fn.updateBookletSelection(e,t.section,l,o);break}case"rows":{if(!("section"in t&&"page"in t))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section div[rel="'+t.page+'"].page table');for(let o=0;o<t.rows.length;o++)l.append(h.fn.buildRow(e,t.rows[o]));break}case"characters":{if(!("section"in t&&"page"in t))continue;let l=e.modules.toolbar.$toolbar.find('div[rel="'+t.section+'"].section div[rel="'+t.page+'"].page div'),o=l.data("actions");for(let a=0;a<t.characters.length;a++)l.append(h.fn.buildCharacter(t.characters[a],o).on("mousedown",s=>(s.preventDefault(),!1)).on("click",s=>{let r=$(s.target);return h.fn.doAction(r.parent().data("context"),r.parent().data("actions")[r.attr("rel")]),s.preventDefault(),!1}));break}default:break}},"addToToolbar"),removeFromToolbar:n(function(e,t){if(typeof t.section=="string"){let i='div.tabs span[rel="'+t.section+'"].tab',l='div[rel="'+t.section+'"].section',o=null;if(typeof t.group=="string")l+=' div[rel="'+t.group+'"].group',typeof t.tool=="string"&&(o=l,l=l+' [rel="'+t.tool+'"].tool');else if(typeof t.page=="string"){let a=l+' div.index div[rel="'+t.page+'"]';l+=' div.pages div[rel="'+t.page+'"].page',typeof t.character=="string"?l+=' span[rel="'+t.character+'"]':typeof t.row=="number"?l+=" table tr:not(:has(th)):eq("+t.row+")":(e.modules.toolbar.$toolbar.find(a).remove(),h.fn.updateBookletSelection(e,t.section,e.modules.toolbar.$toolbar.find(l),e.modules.toolbar.$toolbar.find(a)))}else e.modules.toolbar.$toolbar.find(i).remove();if(e.modules.toolbar.$toolbar.find(l).remove(),o){let a=e.modules.toolbar.$toolbar.find(o);a.children().length===0&&a.addClass("empty")}}},"removeFromToolbar")},fn:{create:n(function(e,t){"$toolbar"in e.modules.toolbar||(e.modules.toolbar.$toolbar=$("<div>").addClass("wikiEditor-ui-toolbar").attr("id","wikiEditor-ui-toolbar"),h.fn.build(e,t),e.$ui.find(".wikiEditor-ui-top").append(e.modules.toolbar.$toolbar))},"create"),doAction:n(function(e,t){switch(t.type){case"replace":case"encapsulate":{if(e.$textarea.prop("readonly"))break;let i={pre:t.options.pre,peri:t.options.peri,post:t.options.post},l=t.type==="replace";if("regex"in t.options&&"regexReplace"in t.options){let o=e.$textarea.textSelection("getSelection");o!==""&&t.options.regex.test(o)&&(i.peri=o.replace(t.options.regex,t.options.regexReplace),i.pre=i.post="",l=!0)}e.$textarea.textSelection("encapsulateSelection",Object.assign({},t.options,i,{replace:l}));break}case"callback":typeof t.execute=="function"&&t.execute(e);break;case"dialog":e.fn.saveSelection(),e.$textarea.wikiEditor("openDialog",t.module);break;default:break}},"doAction"),buildGroup:n(function(e,t,i){let l=$("<div>").attr({class:"group group-"+t,rel:t}),o=i.label;o&&$("<span>").addClass("label").text(o).appendTo(l);let a=!0;if("tools"in i)for(let s in i.tools){let r=h.fn.buildTool(e,s,i.tools[s]);r&&(a=a&&r.css("display")==="none",l.append(r))}return a&&l.addClass("empty"),l},"buildGroup"),buildTool:n(function(e,t,i){if("filters"in i){for(let o=0;o<i.filters.length;o++)if($(i.filters[o]).length===0)return null}let l=i.label;switch(i.type){case"button":case"toggle":{let o;if(i.oouiIcon){let a={framed:!1,classes:["tool"],icon:i.oouiIcon,title:this.buildShortcutLabel(l,i.hotkey)},s;i.type==="button"?s=new OO.ui.ButtonWidget(a):i.type==="toggle"&&(s=new OO.ui.ToggleButtonWidget(a)),o=s.$element.attr("rel",t).data("ooui",s)}else if(o=$("<a>").attr({tabindex:0,title:l,rel:t,role:"button",class:"tool tool-button"}).text(l),i.icon){let a=$.wikiEditor.autoIcon(i.icon,$.wikiEditor.imgPath+"toolbar/");o.css("background-image","url("+a+")")}return o.data("setActive",a=>{o.toggleClass("tool-active",a),o.data("ooui")&&i.type==="toggle"&&(o.data("ooui").setValue(a),OO.ui.WikimediaUITheme&&OO.ui.theme instanceof OO.ui.WikimediaUITheme&&setTimeout(()=>{o.data("ooui").$icon.toggleClass("oo-ui-image-progressive",a)}))}),"action"in i&&(o.data("action",i.action).data("context",e).on("mousedown",a=>(a.preventDefault(),!1)),o.data("ooui")?o.data("ooui").on("click",()=>{h.fn.doAction(e,i.action)}):o.on("click keydown",a=>{if(a.type==="click"||a.type==="keydown"&&a.key==="Enter")return h.fn.doAction(e,i.action),a.preventDefault(),!1}),"hotkey"in i&&(h.fn.ctrlShortcuts[i.hotkey]=i)),o}case"select":{let o="menu-"+Date.now(),a=$("<div>").attr({rel:t,class:"tool tool-select"}),s=$("<div>").addClass("options");if("list"in i)for(let r in i.list){let d=i.list[r].label;s.append($("<a>").data("action",i.list[r].action).data("context",e).on("mousedown",p=>(p.preventDefault(),!1)).on("click keydown",p=>{if(p.type==="click"||p.type==="keydown"&&p.key==="Enter"){let c=$(p.target);return h.fn.doAction(c.data("context"),c.data("action"),c),c.closest(".tool-select").removeClass("options-shown"),p.preventDefault(),!1}}).text(d).addClass("option").attr({rel:r,tabindex:0,role:"menuitem"}))}return a.append($("<a>").addClass("label skin-invert").text(l).data("options",s).attr({role:"button",tabindex:0,"aria-expanded":!1,"aria-controls":o,"aria-haspopup":"menu"}).on("mousedown",r=>(r.preventDefault(),!1)).on("click keydown",r=>{if(r.type==="click"||r.type==="keydown"&&r.key==="Enter"){let d=$(r.target),p=d.data("options"),c=!p.closest(".tool-select").hasClass("options-shown");return p.closest(".tool-select").toggleClass("options-shown",c),d.attr("aria-expanded",c.toString()),r.preventDefault(),!1}})),a.append($("<div>").addClass("menu").append(s)),a}case"element":{let o;return i.element instanceof OO.ui.HtmlSnippet?o=i.element.toString():typeof i.element=="function"?o=i.element(e):o=i.element,$("<div>").attr({rel:t,class:"tool tool-element"}).append(o)}default:return null}},"buildTool"),buildBookmark:n(function(e,t,i){let l=i.label,o=$("<div>");return o.text(l).attr({rel:t,role:"option"}).data("context",e).on("mousedown",a=>(a.preventDefault(),!1)).on("click",a=>{o.parent().parent().find(".page").hide(),o.parent().parent().find(".page-"+o.attr("rel")).show().trigger("loadPage"),o.addClass("current").siblings().removeClass("current");let s=o.parent().parent().attr("rel");return $.cookie("wikiEditor-"+o.data("context").instance+"-booklet-"+s+"-page",o.attr("rel"),{expires:30,path:"/"}),a.preventDefault(),!1})},"buildBookmark"),buildPage:n(function(e,t,i,l){let o=$("<div>").attr({class:"page page-"+t,rel:t});return l?t==="recent"?o.on("loadPage",()=>{try{i.characters=JSON.parse(localStorage.get(`wikieditor-${j}`)||"[]")}catch{i.characters=[]}h.fn.reallyBuildPage(e,t,i,o)}):o.one("loadPage",()=>{h.fn.reallyBuildPage(e,t,i,o)}):h.fn.reallyBuildPage(e,t,i,o),o},"buildPage"),reallyBuildPage:n(function(e,t,i,l){switch(i.layout){case"table":{let o=$("<table>").addClass("table-"+t);if("headings"in i&&o.append(h.fn.buildHeading(e,i.headings)),"rows"in i)for(let a=0;a<i.rows.length;a++)o.append(h.fn.buildRow(e,i.rows[a]));l.addClass("page-table").append(o);break}case"characters":{l.addClass("page-characters");let o=$("<div>").data("context",e).data("actions",{}),a=o.data("actions");if("language"in i&&o.attr("lang",i.language),"direction"in i?o.attr("dir",i.direction):o.attr("dir","ltr"),"characters"in i){for(let s=0;s<i.characters.length;s++)o.append(h.fn.buildCharacter(i.characters[s],a));o.children().attr("role","option").on("mousedown",s=>(s.preventDefault(),!1)).on("click",s=>{let r=$(s.target),d=a[r.attr("rel")];Array.isArray(d)||(d=[d]);for(let p of d)h.fn.doAction(e,p);return s.preventDefault(),!1})}l.empty(),l.append(o);break}}},"reallyBuildPage"),buildHeading:n(function(e,t){let i=$("<tr>");for(let l=0;l<t.length;l++)t[l].msg||console.warn("The toolbar headings must use a `msg` key with a `__wikieditor_i18n` key as value. Other keys are deprecated."),i.append(t[l].msg?$("<th>").append(F(t[l].msg).parseDom()):$("<th>").html($.wikiEditor.autoSafeMsg(t[l],["html","text"])));return i},"buildHeading"),buildRow:n(function(e,t){let i=$("<tr>");for(let l in t)i.append($("<td>").addClass("cell cell-"+l).append($("<span>").html(t[l].html)));return i},"buildRow"),buildCharacter:n(function(e,t){let i=e;if(typeof e=="string"?e={label:e,action:{type:"replace",options:{peri:e,selectPeri:!1}},configRepresentation:i}:e&&0 in e&&1 in e&&(e={label:e[0],action:{type:"replace",options:{peri:e[1],selectPeri:!1}},configRepresentation:i}),e&&"action"in e&&"label"in e){let l={type:"callback",character:e,execute:n(function(){let s;try{s=JSON.parse(localStorage.get(`wikieditor-${j}`)||"[]")}catch{s=[]}let r=this.character.configRepresentation?this.character.configRepresentation:this.character,d=s.findIndex(p=>JSON.stringify(r)===JSON.stringify(p));d!==-1&&s.splice(d,1),s.unshift(r),s=s.slice(0,32),localStorage.set(`wikieditor-${j}`,JSON.stringify(s))},"execute")};t[e.label]=[e.action,l];let o=e.titleMsg?F(e.titleMsg):e.title;return $("<span>").attr({rel:e.label,title:o}).text(e.label)}return console.log("A character for the toolbar was undefined. This is not supposed to happen. Double check the config."),$()},"buildCharacter"),buildTab:n(function(e,t,i){let l=$.cookie("wikiEditor-"+e.instance+"-toolbar-section");l!==null&&$.cookie("wikiEditor-"+e.instance+"-toolbar-section",l,{expires:30,path:"/"});let o=$("<a>").addClass(l===t?"current":null).addClass("skin-invert").attr({tabindex:0,role:"button","aria-expanded":(l===t).toString(),"aria-controls":"wikiEditor-section-"+t}).text(i.label).data("context",e).on("mouseup",()=>{o.trigger("blur")}).on("mousedown",a=>(a.preventDefault(),!1)).on("click keydown",a=>{if(a.type!=="click"&&(a.type!=="keydown"||a.key!=="Enter"))return;o.attr("aria-pressed","true"),$(".tab > a").each((p,c)=>{c!==a.target&&$(c).attr("aria-pressed","false")});let s=o.data("context").$ui.find(".sections"),r=s.find(".section-"+o.parent().attr("rel")),d=!r.hasClass("section-visible");return s.find(".section-visible").removeClass("section-visible").addClass("section-hidden"),o.attr("aria-expanded","false").parent().parent().find("a").removeClass("current"),d&&(r.removeClass("section-hidden").attr("aria-expanded","true").addClass("section-visible"),o.attr("aria-expanded","true").addClass("current")),$.cookie("wikiEditor-"+o.data("context").instance+"-toolbar-section",d?r.attr("rel"):null,{expires:30,path:"/"}),a.preventDefault(),!1});return $("<span>").attr({class:"tab tab-"+t,rel:t}).append(o)},"buildTab"),buildSection:n(function(e,t,i){let l=$("<div>").attr({class:i.type+" section section-"+t,rel:t,id:"wikiEditor-section-"+t}),a=$.cookie("wikiEditor-"+e.instance+"-toolbar-section")===t;return h.fn.reallyBuildSection(e,t,i,l,i.deferLoad),t!=="main"&&t!=="secondary"&&l.attr("aria-expanded",a.toString()).addClass(a?"section-visible":"section-hidden"),l},"buildSection"),reallyBuildSection:n(function(e,t,i,l,o){switch(e.$textarea.trigger("wikiEditor-toolbar-buildSection-"+l.attr("rel"),[i]),i.type){case"toolbar":{if("groups"in i)for(let a in i.groups)l.append(h.fn.buildGroup(e,a,i.groups[a]));break}case"booklet":{let a=$("<div>").addClass("pages").attr({tabindex:"0",role:"listbox"}).on("keydown",r=>{let d=a.children().filter(function(){return $(this).css("display")!=="none"});$.wikiEditor.modules.toolbar.fn.handleKeyDown(d.children().first(),r,a)}),s=$("<div>").addClass("index").attr({tabindex:"0",role:"listbox"}).on("keydown",r=>{$.wikiEditor.modules.toolbar.fn.handleKeyDown(s,r,s)});if("pages"in i)for(let r in i.pages)a.append(h.fn.buildPage(e,r,i.pages[r],o)),s.append(h.fn.buildBookmark(e,r,i.pages[r]));l.append(s,a),h.fn.updateBookletSelection(e,t,a,s);break}}},"reallyBuildSection"),updateBookletSelection:n(function(e,t,i,l){let o="wikiEditor-"+e.instance+"-booklet-"+t+"-page",a=$.cookie(o);a!==null&&$.cookie(o,a,{expires:30,path:"/"});let s=l.find('*[rel="'+a+'"]');s.length===0&&(s=l.children().eq(0),a=s.attr("rel")),i.children().hide(),i.find('*[rel="'+a+'"]').show().trigger("loadPage"),l.children().removeClass("current"),s.addClass("current")},"updateBookletSelection"),build:n(function(e,t){let i=$("<div>").addClass("tabs").appendTo(e.modules.toolbar.$toolbar),l=$("<div>").addClass("sections").appendTo(e.modules.toolbar.$toolbar);e.modules.toolbar.$toolbar.append($("<div>").css("clear","both"));for(let o in t)o==="main"||o==="secondary"?e.modules.toolbar.$toolbar.prepend(h.fn.buildSection(e,o,t[o])):(l.append(h.fn.buildSection(e,o,t[o])),i.append(h.fn.buildTab(e,o,t[o])));setTimeout(()=>{e.$textarea.trigger("wikiEditor-toolbar-doneInitialSections")}),h.fn.setupShortcuts(e)},"build"),ctrlShortcuts:{},setupShortcuts:n(function(e){e.$textarea.on("keydown",t=>{let i=this.modifierForKey(t.key),l=i==="ctrlKey"?"metaKey":"ctrlKey",o=t[i]&&!t[l]&&!t.altKey&&!t.shiftKey&&(h.fn.ctrlShortcuts[t.key]||h.fn.ctrlShortcuts[t.which]);o&&(t.preventDefault(),h.fn.doAction(e,o.action))})},"setupShortcuts"),buildShortcutLabel:n(function(e,t){if(typeof t!="string")return e;let i=this.modifierForKey(t)==="ctrlKey"?"ctrl+":"\u2318",l=F("word-separator").plain(),o=(l+F("brackets").plain()).split("$1"),a=new RegExp(o.map(escape).join(".*?")+"$");return e.replace(a,"")+l+F("brackets",i+t).plain()},"buildShortcutLabel"),modifierForKey:n(function(e){let t=$.client.profile();return t.name==="safari"&&e===","?"ctrlKey":t.platform==="mac"?"metaKey":"ctrlKey"},"modifierForKey"),handleKeyDown:n(function(e,t,i){let l=e.find(".wikiEditor-character-highlighted"),o=i.find(".wikiEditor-character-highlighted").offset(),a=o?o.top:0,s=i.offset().top,r;switch(t.keyCode){case 38:l.length?(l.removeClass("wikiEditor-character-highlighted"),r=l.prev(),r=r.length?r:l,r.addClass("wikiEditor-character-highlighted")):e.children().first().addClass("wikiEditor-character-highlighted"),t.preventDefault(),t.stopPropagation();break;case 40:l.length?(l.removeClass("wikiEditor-character-highlighted"),r=l.next(),r=r.length?r:l,r.addClass("wikiEditor-character-highlighted")):e.children().first().addClass("wikiEditor-character-highlighted"),t.preventDefault(),t.stopPropagation();break;case 13:l.trigger("click");break}i.scrollTop(i.scrollTop()+(a-s))},"handleKeyDown")}};le.exports=h});var ae=x((Ge,re)=>{var Me=v().i18n,C={api:{addDialog:n(function(e,t){C.fn.create(e,t)},"addDialog"),openDialog:n(function(e,t){if(t in C.modules){let i=C.modules[t],l=$("#"+i.id);l.length===0&&(C.fn.reallyCreate(e,i,t),l=$("#"+i.id)),l.closest(".ui-dialog").find(".ui-dialog-titlebar-close").removeClass("ui-state-focus"),l.dialog("open")}},"openDialog"),closeDialog:n(function(e,t){t in C.modules&&$("#"+C.modules[t].id).dialog("close")},"closeDialog")},fn:{create:n(function(e,t){for(let i in t){let l=t[i],o=!1;if(typeof l.filters<"u"){for(let s=0;s<l.filters.length;s++)if($(l.filters[s]).length===0){o=!0;break}}let a=$("#"+l.id);a.length>0&&a.data("context").$textarea!==e.$textarea&&a.remove(),a=$("#"+l.id),!o&&a.length===0&&(C.modules[i]=l,e.$textarea.trigger("wikiEditor-dialogs-setup-"+i),typeof l.immediateCreate<"u"&&l.immediateCreate&&C.fn.reallyCreate(e,l,i))}},"create"),reallyCreate:n(function(e,t,i){let l=t.dialog;l.bgiframe=!0,l.autoOpen=!1,typeof l.modal>"u"&&(l.modal=!0),console.warn("The dialog title must be a mw.Message object. Other types are deprecated."),l.title=t.title,l.newButtons={};for(let s in l.buttons)l.newButtons[Me(s)]=l.buttons[s];l.buttons=l.newButtons;let o;t.html instanceof $?o=t.html:o=$($.parseHTML(t.html)),$("<div>").attr("id",t.id).append(o).data("context",e).appendTo(document.body).each(t.init).dialog(l).on("dialogclose",()=>{e.fn.restoreSelection()}),e.$textarea.trigger("wikiEditor-dialogs-loaded-"+i)},"reallyCreate")},modules:{},quickDialog:n(function(e,t){$("<div>").text(e).appendTo(document.body).dialog(Object.assign({bgiframe:!0,modal:!0},t)).dialog("open")},"quickDialog")};re.exports=C});var se=x(()=>{ie();var L=v().i18n,ne=Object.prototype.hasOwnProperty,K=(function(){let e=$(document.body).hasClass("rtl"),t=["en"];return t.length>=2&&!/^en-/.test(t[t.length-2])&&t.pop(),e&&t.push("default-rtl"),t.push("default"),t})();function B(e,t){let i=e+"Msg: "+t,l="/";l.slice(0,2)==="//"&&(l=location.protocol+l);let o;e==="html"||e==="text"||e==="title"?o="__wikieditor_i18n( "+JSON.stringify(t)+" ).parse()":o="__wikieditor_i18n( "+JSON.stringify(t)+" )",n(()=>{console.log("wikiEditor_autoMsg","WikiEditor: Use `"+e+": "+o+"` instead of `"+e+"Msg: "+JSON.stringify(t)+"`.\nSearch: "+l)},"deprecationMsg")()}n(B,"deprecateAutoMsg");$.wikiEditor={modules:{toolbar:H(),dialogs:ae()},extensions:{},instances:[],imgPath:"./images/",isRequired:n(function(e,t){if(typeof e.req<"u"){for(let i in e.req)if(e.req[i]===t)return!0}return!1},"isRequired"),autoMsg:n(function(e,t){if(console.warn("autoMsg is deprecated. Use __wikieditor_i18n() instead."),typeof t=="object"){for(let i in t)if(t[i]in e||t[i]+"Msg"in e){t=t[i];break}}if(t in e)return e[t];if(t+"Msg"in e){let i=e[t+"Msg"];return Array.isArray(i)&&i.length>=2?(B(t,i[0]),L.apply(L,i).text()):(B(t,i),L(i).text())}else return""},"autoMsg"),autoSafeMsg:n(function(e,t){if(consolee.warn("autoSafeMsg is deprecated. Use __wikieditor_i18n() instead."),typeof t=="object"){for(let i in t)if(t[i]in e||t[i]+"Msg"in e){t=t[i];break}}if(t in e)return e[t];if(t+"Msg"in e){let i=e[t+"Msg"];return Array.isArray(i)&&i.length>=2?(B(t,i[0]),L.apply(L,i).escaped()):(B(t,i),L(i).escaped())}else return""},"autoSafeMsg"),autoLang:n(function(e){for(let t=0;t<K.length;t++){let i=K[t];if(ne.call(e,i))return e[i]}return e},"autoLang"),autoIcon:n(function(e,t){t=t||$.wikiEditor.imgPath;for(let i=0;i<K.length;i++){let l=K[i];if(e&&ne.call(e,l)){let o=e[l];return o.slice(0,5)==="data:"||o.slice(0,7)!=="http://"&&o.slice(0,8)!=="https://"&&o[0]!=="/"&&(o=t+o),o}}return e},"autoIcon")};$.fn.wikiEditor=function(){let e=$(this).data("wikiEditor-context");if(!e){e={$textarea:$(this),$focusedElem:null,views:{},modules:{},data:{},instance:$.wikiEditor.instances.push($(this))-1,savedSelection:null,extensions:[]},e.api={addModule:n(function(o,a){let s={};typeof a=="string"?s[a]={}:typeof a=="object"&&(s=a);for(let r in s)if(typeof r=="string"&&typeof $.wikiEditor.modules[r]<"u"){if("api"in $.wikiEditor.modules[r])for(let d in $.wikiEditor.modules[r].api)d in o.api||(o.api[d]=$.wikiEditor.modules[r].api[d]);"fn"in $.wikiEditor.modules[r]&&"create"in $.wikiEditor.modules[r].fn&&typeof o.modules[r]>"u"&&(o.modules[r]={},$.wikiEditor.modules[r].fn.create(o,s[r]))}},"addModule")},e.evt={},e.fn={trigger:n(function(o,a){if(a=a||{type:"custom"},a.data=a.data||{},o in e.evt&&!e.evt[o](a))return!1;let s=!0;for(let r in e.modules)if(r in $.wikiEditor.modules&&"evt"in $.wikiEditor.modules[r]&&o in $.wikiEditor.modules[r].evt){let d=$.wikiEditor.modules[r].evt[o](e,a);d!==null&&(s=s&&d)}return s},"trigger"),saveSelection:n(function(){e.$focusedElem=$(":focus"),e.$textarea.trigger("focus"),e.savedSelection=e.$textarea.textSelection("getCaretPosition",{startAndEnd:!0})},"saveSelection"),restoreSelection:n(function(){e.savedSelection&&(e.$textarea.trigger("focus"),e.$textarea.textSelection("setSelection",{start:e.savedSelection[0],end:e.savedSelection[1]}),e.savedSelection=null),e.$focusedElem&&e.$focusedElem.trigger("focus")},"restoreSelection")};let i=e.$textarea.is(":focus"),l=e.$textarea.textSelection("getCaretPosition",{startAndEnd:!0});e.$textarea.wrapAll($("<div>").addClass("wikiEditor-ui")).wrapAll($("<div>").addClass("wikiEditor-ui-view")).wrapAll($("<div>").addClass("wikiEditor-ui-left")).wrapAll($("<div>").addClass("wikiEditor-ui-bottom")).wrapAll($("<div>").addClass("wikiEditor-ui-text")),e.$textarea.prop("scrollTop",$("#wpScrolltop").val()),i&&(e.$textarea.trigger("focus"),e.$textarea.textSelection("setSelection",{start:l[0],end:l[1]})),e.$ui=e.$textarea.parent().parent().parent().parent().parent(),e.$wikitext=e.$textarea.parent().parent().parent().parent(),e.$ui.after($("<div>").addClass("wikiEditor-ui-clear")),e.$wikitext.append($("<div>").addClass("wikiEditor-ui-right"),$("<div>").addClass("wikiEditor-ui-clear")),e.$wikitext.find(".wikiEditor-ui-left").prepend($("<div>").addClass("wikiEditor-ui-top")),e.view="wikitext",$(window).on("resize",o=>{e.fn.trigger("resize",o)})}let t=$.makeArray(arguments);if(t[0]==="addModule"&&typeof t[1]<"u"){let i=t[1];typeof i!="object"&&(i={},i[t[1]]="");for(let l in i)if(l in $.wikiEditor.modules){for(let o in $.wikiEditor.extensions)$.wikiEditor.isRequired($.wikiEditor.modules[l],o)&&!e.extensions.includes(o)&&(e.extensions[e.extensions.length]=o,$.wikiEditor.extensions[o](e));break}}if(t.length>0){let i=t.shift();i in e.api&&e.api[i](e,t[0]||{})}return $(this).data("wikiEditor-context",e)}});var X=x((et,Ae)=>{Ae.exports={magicWords:["__TOC__","__NOTOC__"],signature:"--\u53EF\u7231\u7684\u732B\u5A18~"}});var ue=x((tt,pe)=>{function ce(){return new Proxy({},{get:ce,set:n(()=>{},"set")})}n(ce,"noErrGetter");var G=X(),de="File",w=ce.call();function U(e){let t=$("<div>");return t.append(e),t.find("a").attr("href","#"),t.html()}n(U,"delink");var De={toolbar:{main:{type:"toolbar",groups:{format:{tools:{bold:{label:__wikieditor_i18n("wikieditor-toolbar-tool-bold"),type:"button",oouiIcon:"bold",action:{type:"encapsulate",options:{pre:"'''",peri:__wikieditor_i18n("wikieditor-toolbar-tool-bold-example"),post:"'''"}},hotkey:"b"},italic:{section:"main",group:"format",id:"italic",label:__wikieditor_i18n("wikieditor-toolbar-tool-italic"),type:"button",oouiIcon:"italic",action:{type:"encapsulate",options:{pre:"''",peri:__wikieditor_i18n("wikieditor-toolbar-tool-italic-example"),post:"''"}},hotkey:"i"}}},insert:{tools:{signature:{label:__wikieditor_i18n("wikieditor-toolbar-tool-signature"),type:"button",oouiIcon:"signature",action:{type:"encapsulate",options:{pre:G.signature}}}}}}},secondary:{type:"toolbar",groups:{default:{tools:{}}}},advanced:{label:__wikieditor_i18n("wikieditor-toolbar-section-advanced"),type:"toolbar",groups:{heading:{tools:{heading:{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading"),type:"select",list:{"heading-2":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-2"),action:{type:"encapsulate",options:{pre:"== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ==",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1==$3==$4",ownline:!0}}},"heading-3":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-3"),action:{type:"encapsulate",options:{pre:"=== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ===",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1===$3===$4",ownline:!0}}},"heading-4":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-4"),action:{type:"encapsulate",options:{pre:"==== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" ====",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1====$3====$4",ownline:!0}}},"heading-5":{label:__wikieditor_i18n("wikieditor-toolbar-tool-heading-5"),action:{type:"encapsulate",options:{pre:"===== ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-heading-example"),post:" =====",regex:/^(\s*)(={1,6})(.*?)\2(\s*)$/,regexReplace:"$1=====$3=====$4",ownline:!0}}}}}}},format:{label:__wikieditor_i18n("wikieditor-toolbar-group-format"),tools:{ulist:{label:__wikieditor_i18n("wikieditor-toolbar-tool-ulist"),type:"button",oouiIcon:"listBullet",action:{type:"encapsulate",options:{pre:"* ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-ulist-example"),post:"",regex:/^([*#:;]*)\s*(.*)$/gm,regexReplace:"$1* $2",ownline:!0,splitlines:!0}}},olist:{label:__wikieditor_i18n("wikieditor-toolbar-tool-olist"),type:"button",oouiIcon:"listNumbered",action:{type:"encapsulate",options:{pre:"# ",peri:__wikieditor_i18n("wikieditor-toolbar-tool-olist-example"),post:"",regex:/^([*#:;]*)\s*(.*)$/gm,regexReplace:"$1# $2",ownline:!0,splitlines:!0}}},code:{label:__wikieditor_i18n("wikieditor-toolbar-tool-code"),type:"button",oouiIcon:"code",action:{type:"encapsulate",options:{pre:"<code>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-code-example"),post:"</code>"}}},nowiki:{label:__wikieditor_i18n("wikieditor-toolbar-tool-nowiki"),type:"button",oouiIcon:"noWikiText",action:{type:"encapsulate",options:{pre:"<nowiki>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-nowiki-example"),post:"</nowiki>"}},hotkey:"\\"},newline:{label:__wikieditor_i18n("wikieditor-toolbar-tool-newline"),type:"button",oouiIcon:"newline",action:{type:"encapsulate",options:{pre:`<br>
`}}}}},size:{tools:{big:{label:__wikieditor_i18n("wikieditor-toolbar-tool-big"),type:"button",oouiIcon:"bigger",action:{type:"encapsulate",options:{pre:"<big>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-big-example"),post:"</big>"}}},small:{label:__wikieditor_i18n("wikieditor-toolbar-tool-small"),type:"button",oouiIcon:"smaller",action:{type:"encapsulate",options:{pre:"<small>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-small-example"),post:"</small>"}}},superscript:{label:__wikieditor_i18n("wikieditor-toolbar-tool-superscript"),type:"button",oouiIcon:"superscript",action:{type:"encapsulate",options:{pre:"<sup>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-superscript-example"),post:"</sup>"}},hotkey:"."},subscript:{label:__wikieditor_i18n("wikieditor-toolbar-tool-subscript"),type:"button",oouiIcon:"subscript",action:{type:"encapsulate",options:{pre:"<sub>",peri:__wikieditor_i18n("wikieditor-toolbar-tool-subscript-example"),post:"</sub>"}},hotkey:","}}},insert:{label:__wikieditor_i18n("wikieditor-toolbar-group-insert"),tools:{gallery:{label:__wikieditor_i18n("wikieditor-toolbar-tool-gallery"),type:"button",oouiIcon:"imageGallery",action:{type:"encapsulate",options:{pre:`<gallery>
`,peri:__wikieditor_i18n("wikieditor-toolbar-tool-gallery-example",de),post:`
</gallery>`,ownline:!0}}},redirect:{label:__wikieditor_i18n("wikieditor-toolbar-tool-redirect"),type:"button",oouiIcon:"articleRedirect",action:{type:"encapsulate",options:{pre:G.magicWords.redirect[0]+" [[",peri:__wikieditor_i18n("wikieditor-toolbar-tool-redirect-example"),post:"]]",ownline:!0}}}}}}},characters:{label:__wikieditor_i18n("wikieditor-toolbar-section-characters"),type:"booklet",deferLoad:!0,pages:{recent:{label:__wikieditor_i18n("special-characters-recently-used"),layout:"characters",characters:[]},latin:{label:__wikieditor_i18n("special-characters-group-latin"),layout:"characters",characters:w.latin},latinextended:{label:__wikieditor_i18n("special-characters-group-latinextended"),layout:"characters",characters:w.latinextended},ipa:{label:__wikieditor_i18n("special-characters-group-ipa"),layout:"characters",characters:w.ipa},symbols:{label:__wikieditor_i18n("special-characters-group-symbols"),layout:"characters",characters:w.symbols},greek:{label:__wikieditor_i18n("special-characters-group-greek"),layout:"characters",language:"el",characters:w.greek},greekextended:{label:__wikieditor_i18n("special-characters-group-greekextended"),layout:"characters",characters:w.greekextended},cyrillic:{label:__wikieditor_i18n("special-characters-group-cyrillic"),layout:"characters",characters:w.cyrillic},arabic:{label:__wikieditor_i18n("special-characters-group-arabic"),layout:"characters",language:"ar",direction:"rtl",characters:w.arabic},arabicextended:{label:__wikieditor_i18n("special-characters-group-arabicextended"),layout:"characters",language:"ar",direction:"rtl",characters:w.arabicextended},hebrew:{label:__wikieditor_i18n("special-characters-group-hebrew"),layout:"characters",direction:"rtl",characters:w.hebrew},bangla:{label:__wikieditor_i18n("special-characters-group-bangla"),language:"bn",layout:"characters",characters:w.bangla},tamil:{label:__wikieditor_i18n("special-characters-group-tamil"),language:"ta",layout:"characters",characters:w.tamil},telugu:{label:__wikieditor_i18n("special-characters-group-telugu"),language:"te",layout:"characters",characters:w.telugu},sinhala:{label:__wikieditor_i18n("special-characters-group-sinhala"),language:"si",layout:"characters",characters:w.sinhala},devanagari:{label:__wikieditor_i18n("special-characters-group-devanagari"),layout:"characters",characters:w.devanagari},gujarati:{label:__wikieditor_i18n("special-characters-group-gujarati"),language:"gu",layout:"characters",characters:w.gujarati},thai:{label:__wikieditor_i18n("special-characters-group-thai"),language:"th",layout:"characters",characters:w.thai},lao:{label:__wikieditor_i18n("special-characters-group-lao"),language:"lo",layout:"characters",characters:w.lao},khmer:{label:__wikieditor_i18n("special-characters-group-khmer"),language:"km",layout:"characters",characters:w.khmer},canadianaboriginal:{label:__wikieditor_i18n("special-characters-group-canadianaboriginal"),language:"cr",layout:"characters",characters:w.canadianaboriginal},runes:{label:__wikieditor_i18n("special-characters-group-runes"),layout:"characters",characters:w.runes}}},help:{label:__wikieditor_i18n("wikieditor-toolbar-section-help"),type:"booklet",deferLoad:!0,pages:{format:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-format"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-italic-description").parse()},syntax:{html:"''"+__wikieditor_i18n("wikieditor-toolbar-help-content-italic-example").escaped()+"''"},result:{html:"<em>"+__wikieditor_i18n("wikieditor-toolbar-help-content-italic-example").parse()+"</em>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-bold-description").parse()},syntax:{html:"'''"+__wikieditor_i18n("wikieditor-toolbar-help-content-bold-example").escaped()+"'''"},result:{html:"<strong>"+__wikieditor_i18n("wikieditor-toolbar-help-content-bold-example").parse()+"</strong>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-description").parse()},syntax:{html:"'''''"+__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-example").escaped()+"'''''"},result:{html:"<strong><em>"+__wikieditor_i18n("wikieditor-toolbar-help-content-bolditalic-example").parse()+"</em></strong>"}}]},link:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-link"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-example").escaped()},result:{html:'<span class="pre-wrap">'+U(__wikieditor_i18n("wikieditor-toolbar-help-content-ilink-example").parseDom())+"</span>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example1",__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-url"),__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-label")).escaped()},result:{html:'<span class="mw-parser-output pre-wrap">'+U(__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example2",__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-url"),__wikieditor_i18n("wikieditor-toolbar-help-content-xlink-example-label"),1).parseDom())+"</span>"}}]},heading:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-heading"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-description").parse()},syntax:{html:"== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-example").escaped()+" =="},result:{html:"<h2>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading2-example").parse()+"</h2>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-description").parse()},syntax:{html:"=== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-example").escaped()+" ==="},result:{html:"<h3>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading3-example").parse()+"</h3>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-description").parse()},syntax:{html:"==== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-example").escaped()+" ===="},result:{html:"<h4>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading4-example").parse()+"</h4>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-description").parse()},syntax:{html:"===== "+__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-example").escaped()+" ====="},result:{html:"<h5>"+__wikieditor_i18n("wikieditor-toolbar-help-content-heading5-example").parse()+"</h5>"}}]},list:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-list"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-description").parse()},syntax:{html:"* "+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").escaped()+"<br />* "+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").escaped()},result:{html:"<ul><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").parse()+"</li><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-ulist-example").parse()+"</li></ul>"}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-olist-description").parse()},syntax:{html:"# "+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").escaped()+"<br /># "+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").escaped()},result:{html:"<ol><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").parse()+"</li><li>"+__wikieditor_i18n("wikieditor-toolbar-help-content-olist-example").parse()+"</li></ol>"}}]},file:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-file"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-file-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-file-syntax",de,G.magicWords.img_thumbnail[0],__wikieditor_i18n("wikieditor-toolbar-help-content-file-caption")).escaped()},result:{html:'<div class="thumbinner" style="width: 102px;"><a class="image"><img alt="" src="'+$.wikiEditor.imgPath+'toolbar/example-image.png" width="100" height="50" class="thumbimage"/></a><div class="thumbcaption"><div class="magnify"><a title="'+__wikieditor_i18n("thumbnail-more").escaped()+'" class="internal"></a></div>'+__wikieditor_i18n("wikieditor-toolbar-help-content-file-caption").escaped()+"</div></div>"}}]},discussion:{label:__wikieditor_i18n("wikieditor-toolbar-help-page-discussion"),layout:"table",headings:[{msg:"wikieditor-toolbar-help-heading-description"},{msg:"wikieditor-toolbar-help-heading-syntax"},{msg:"wikieditor-toolbar-help-heading-result"}],rows:[{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-syntax").escaped()},result:{html:U(__wikieditor_i18n("wikieditor-toolbar-help-content-signaturetimestamp-example","\u7528\u6237","\u7528\u6237\u8BA8\u8BBA","\u7528\u6237\u540D").parseDom())}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signature-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-signature-syntax").escaped()},result:{html:U(__wikieditor_i18n("wikieditor-toolbar-help-content-signature-example","\u7528\u6237","\u7528\u6237\u8BA8\u8BBA","\u7528\u6237\u540D").parseDom())}},{description:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent-description").parse()},syntax:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent1").escaped()+"<br />:"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent2").escaped()+"<br />::"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent3").escaped()},result:{html:__wikieditor_i18n("wikieditor-toolbar-help-content-indent1").parse()+"<dl><dd>"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent2").parse()+"<dl><dd>"+__wikieditor_i18n("wikieditor-toolbar-help-content-indent3").parse()+"</dd></dl></dd></dl>"}}]}}}}};pe.exports=De});var J=x((ot,ke)=>{var he=v().i18n;function T(){OO.EventEmitter.call(this),this.radioInt=new OO.ui.RadioOptionWidget({label:he("wikieditor-toolbar-tool-link-int")}),this.radioExt=new OO.ui.RadioOptionWidget({label:he("wikieditor-toolbar-tool-link-ext")});let e=new OO.ui.RadioSelectWidget({items:[this.radioInt,this.radioExt]});e.connect(this,{choose:this.onRadioChoose});let t={align:"top",classes:["mw-wikiEditor-InsertLink-LinkTypeField"]};T.super.call(this,e,t)}n(T,"LinkTypeField");OO.inheritClass(T,OO.ui.FieldLayout);OO.mixinClass(T,OO.EventEmitter);T.static.LINK_MODE_INTERNAL="internal";T.static.LINK_MODE_EXTERNAL="external";T.prototype.setIsExternal=function(e){this.getField().selectItem(e?this.radioExt:this.radioInt)};T.prototype.isInternal=function(){return this.radioInt.isSelected()};T.prototype.onRadioChoose=function(){this.emit("change",this.radioExt.isSelected())};ke.exports=T});var fe=x((rt,be)=>{var Ne=v().i18n;function M(e){this.external=e.external||!1,this.external&&(e.icon="linkExternal",e.description=Ne("wikieditor-toolbar-tool-link-int-target-status-external"),e.url=e.data.slice(0,1).toLowerCase()+e.data.slice(1),e.data=e.url,/^[a-z]+:\/\/./.test(e.url)||(e.url="http://"+e.url),e.missing=!1),this.disambiguation=e.disambiguation||!1,this.missing=e.missing||!1,M.super.call(this,e)}n(M,"InsertLinkTitleOptionWidget");OO.inheritClass(M,OO.ui.Widget);M.prototype.isExternal=function(){return this.external};M.prototype.isMissing=function(){return this.missing};M.prototype.isDisambiguation=function(){return this.disambiguation};be.exports=M});var ge=x((nt,we)=>{var Fe=fe(),Re=v().i18n;function g(){g.super.call(this,{showImages:!0,showDescriptions:!0,showDisambigsLast:!0,placeholder:Re("wikieditor-toolbar-tool-link-int-target-tooltip"),$overlay:this.getOverlay(),validateTitle:!1,showInterwikis:!0,required:!0,addQueryInput:!0})}n(g,"TitleInputWidget");OO.inheritClass(g,OO.ui.Widget);g.static.urlRegex=new RegExp("^(http|https|ftp|sftp|www\\.)","i");g.prototype.onLookupInputBlur=function(){g.super.prototype.onLookupInputBlur.apply(this),this.selectFirstMatch()};g.prototype.selectFirstMatch=function(){this.getLookupMenuItems().then(e=>{for(let t=0;t<e.length;t++){let i=e[t],l=this.getQueryValue();if(i.getData()===l||i.getData()===l.charAt(0).toUpperCase()+l.slice(1)){this.emit("select",i);break}}})};g.prototype.getOptionWidgetData=function(e,t){let i=g.super.prototype.getOptionWidgetData.call(this,e,t);return i.external=t.originalData.external,i};g.prototype.createOptionWidget=function(e){return new Fe(e)};g.prototype.getLookupCacheDataFromResponse=function(e){let t=g.super.prototype.getLookupCacheDataFromResponse(e);if(t.pages===void 0)return t;for(let i in t.pages)if(Object.prototype.hasOwnProperty.call(t.pages,i)){let l=t.pages[i];l.external=l.missing!==void 0&&this.looksLikeExternalLink(l.title)}return t};g.prototype.onLookupMenuChoose=function(e){g.super.prototype.onLookupMenuChoose.call(this,e),this.emit("select",e)};g.prototype.getOverlay=function(){return OO.ui.getDefaultOverlay().clone().css("z-index","1010").appendTo(document.body)};g.prototype.looksLikeExternalLink=function(e){return this.constructor.static.urlRegex.test(e)};we.exports=g});var _e=x((dt,me)=>{var E=J(),Pe=ge(),Q=v().i18n;function y(){OO.EventEmitter.call(this);let e=new Pe;e.connect(this,{change:this.onChange,select:this.onSelect}),this.urlMode=E.static.LINK_MODE_INTERNAL,this.urlModeManual=!1;let t={align:"top",label:Q("wikieditor-toolbar-tool-link-int-target"),classes:["mw-wikiEditor-InsertLink-TitleInputField"]};y.super.call(this,e,t)}n(y,"TitleInputField");OO.inheritClass(y,OO.ui.FieldLayout);OO.mixinClass(y,OO.EventEmitter);y.prototype.reset=function(){this.getField().setValue(""),this.urlModeManual=!1,this.urlMode=E.static.LINK_MODE_INTERNAL};y.prototype.setUrlMode=function(e){this.urlMode=e===E.static.LINK_MODE_EXTERNAL?E.static.LINK_MODE_EXTERNAL:E.static.LINK_MODE_INTERNAL,this.urlModeManual=!0,this.getField().selectFirstMatch(),this.validate(this.getField().getValue())};y.prototype.isExternal=function(){return this.urlMode===E.static.LINK_MODE_EXTERNAL};y.prototype.makeMessage=function(e,t){return this.message=new OO.ui.MessageWidget({type:e,inline:!0,label:t}),this.message.$element};y.prototype.setMessage=function(e,t,i){this.setNotices([t]),this.message.setIcon(e).setType(i)};y.prototype.onChange=function(e){!this.urlModeManual&&this.getField().looksLikeExternalLink(e)&&(this.urlMode=E.static.LINK_MODE_EXTERNAL),this.validate(e)};y.prototype.validate=function(e){this.urlMode===E.static.LINK_MODE_INTERNAL&&e!==""?(this.setMessage("error",Q("wikieditor-toolbar-tool-link-int-target-status-invalid").parse(),"error"),this.emit("invalid")):(this.setNotices([]),this.emit("change",e))};y.prototype.onSelect=function(e){let t,i;this.urlMode===E.static.LINK_MODE_EXTERNAL||!this.urlModeManual&&this.urlMode===E.static.LINK_MODE_INTERNAL&&e.isExternal()?(t="linkExternal",i="wikieditor-toolbar-tool-link-int-target-status-external"):e.isDisambiguation()?(t="articleDisambiguation",i="wikieditor-toolbar-tool-link-int-target-status-disambig"):!e.isMissing()&&!e.isExternal()?(t="article",i="wikieditor-toolbar-tool-link-int-target-status-exists"):(t="articleNotFound",i="wikieditor-toolbar-tool-link-int-target-status-notexists"),this.setMessage(t,Q(i).parse())};me.exports=y});var ye=x((pt,xe)=>{var $e=v().i18n;function A(){let e=new OO.ui.TextInputWidget({placeholder:$e("wikieditor-toolbar-tool-link-int-text-tooltip")});e.connect(this,{change:"onInputChange"});let t={align:"top",label:$e("wikieditor-toolbar-tool-link-int-text"),classes:["mw-wikiEditor-InsertLink-LinkTextField"]};A.super.call(this,e,t),this.touched=!1}n(A,"LinkTextField");OO.inheritClass(A,OO.ui.FieldLayout);A.prototype.setValueIfUntouched=function(e){this.touched||this.getField().setValue(e)};A.prototype.setTouched=function(e){this.touched=e};A.prototype.onInputChange=function(){$.contains(this.$element[0],document.activeElement)&&(this.touched=!0)};xe.exports=A});var Ee=x((ht,ve)=>{var f=v().i18n,Y=H(),qe=_e(),We=ye(),N=J(),m=new qe,D=new We,R=new N,Z=X();function P(e){let t=e.data("dialogaction"),i=t?$(t):e.find("button").first();i&&i.trigger("click")}n(P,"triggerButtonClick");ve.exports={replaceIcons:n(function(e){e.wikiEditor("addToToolbar",{section:"main",group:"insert",tools:{link:{label:f("wikieditor-toolbar-tool-link"),type:"button",oouiIcon:"link",action:{type:"dialog",module:"insert-link"},hotkey:75},file:{label:f("wikieditor-toolbar-tool-file"),type:"button",oouiIcon:"image",action:{type:"dialog",module:"insert-file"}}}}).wikiEditor("addToToolbar",{section:"advanced",group:"insert",tools:{table:{label:f("wikieditor-toolbar-tool-table"),type:"button",oouiIcon:"table",action:{type:"dialog",module:"insert-table"}}}}).wikiEditor("addToToolbar",{section:"secondary",group:"default",tools:{replace:{label:f("wikieditor-toolbar-tool-replace"),type:"button",oouiIcon:"articleSearch",action:{type:"dialog",module:"search-and-replace"}}}})},"replaceIcons"),getDefaultConfig:n(function(){return{dialogs:{"insert-link":{title:f("wikieditor-toolbar-tool-link-title"),id:"wikieditor-toolbar-link-dialog",html:$("<fieldset>").append(m.$element,D.$element,R.$element),init:n(function(){let e=n(function(t){$(".wikieditor-toolbar-tool-link-insert").button("option","disabled",!t)},"setButtonState");m.connect(this,{change:n(function(t){R.setIsExternal(m.isExternal()),D.setValueIfUntouched(t),e(t!=="")},"change"),invalid:n(function(){e(!1)},"invalid")}),R.connect(this,{change:n(function(t){let i=t?N.static.LINK_MODE_EXTERNAL:N.static.LINK_MODE_INTERNAL;m.setUrlMode(i)},"change")})},"init"),dialog:{width:500,dialogClass:"wikiEditor-toolbar-dialog",buttons:{"wikieditor-toolbar-tool-link-insert":{class:"wikieditor-toolbar-tool-link-insert",text:f("wikieditor-toolbar-tool-link-insert"),click:n(function(){function e(r){return r.replace(/(\]{2,})/g,"<nowiki>$1</nowiki>")}n(e,"escapeInternalText");function t(r){return r.replace(/ /g,"%20").replace(/\[/g,"%5B").replace(/\]/g,"%5D")}n(t,"escapeExternalTarget");function i(r){return r.replace(/(\]+)/g,"<nowiki>$1</nowiki>")}if(n(i,"escapeExternalText"),$(".wikieditor-toolbar-tool-link-insert").button("option","disabled"))return;let l=m.getField().getValue(),o=D.getField().getValue();o.trim()===""&&(o="");let a="";if(R.isInternal())l===o||!o.length?a="[["+l+"]]":a="[["+l+"|"+e(o)+"]]";else{l=l.trim(),new RegExp("^(?:http|https|ftp|sftp).").test(l)||(l="http://"+l);let r=l.match($(this).data("articlePathRegex"));if(r&&!$(this).data("ignoreLooksInternal")){let c={},u=this;c[f("wikieditor-toolbar-tool-link-lookslikeinternal-int")]=function(){let b=r[1];try{b=decodeURI(b)}catch{}m.getField().setValue(b),m.setUrlMode(N.static.LINK_MODE_INTERNAL),$(this).dialog("close"),m.getField().selectFirstMatch()},c[f("wikieditor-toolbar-tool-link-lookslikeinternal-ext")]=function(){$(u).data("ignoreLooksInternal",!0),$(u).closest(".ui-dialog").find("button").first().trigger("click"),$(u).data("ignoreLooksInternal",!1),$(this).dialog("close")},$.wikiEditor.modules.dialogs.quickDialog(f("wikieditor-toolbar-tool-link-lookslikeinternal",r[1]),{buttons:c});return}let d=t(l),p=i(o);d===p&&!l.startsWith("//")?a=d:o===""?a="["+d+"]":a="["+d+" "+p+"]"}let s=$("#wikieditor-toolbar-link-dialog").data("whitespace");s&&(a=s[0]+a+s[1]),$(this).dialog("close"),Y.fn.doAction($(this).data("context"),{type:"replace",options:{pre:a}},$(this)),m.reset(),D.getField().setValue(""),R.getField().selectItem(null)},"click")},"wikieditor-toolbar-tool-link-cancel":n(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-link-cancel")},open:n(function(){let e="example";$(this).data("articlePathRegex",new RegExp("^https?://"+escape(e+"").replace(/\\\$1/g,"(.*)")+"$"));let i=$(this).data("context").$textarea.textSelection("getSelection");if(m.getField().focus(),m.getField().emit("change",m.getField().getValue()),$("#wikieditor-toolbar-link-dialog").data("whitespace",["",""]),i!==""){let o,a,s,r;if((o=i.match(/^(\s*)\[\[([^\]|]+)(\|([^\]|]*))?\]\](\s*)$/))?(a=o[2],s=o[4]?o[4]:o[2],r=!1,$("#wikieditor-toolbar-link-dialog").data("whitespace",[o[1],o[5]])):(o=i.match(/^(\s*)\[([^\] ]+)( ([^\]]+))?\](\s*)$/))?(a=o[2],s=o[4]||"",r=!0,$("#wikieditor-toolbar-link-dialog").data("whitespace",[o[1],o[5]])):(a=s=i.trim(),a.length<i.length&&$("#wikieditor-toolbar-link-dialog").data("whitespace",[i.slice(0,i.indexOf(a.charAt(0))),i.slice(i.lastIndexOf(a.charAt(a.length-1))+1)])),typeof a<"u"&&m.getField().setValue(a),typeof s<"u"&&D.getField().setValue(s),D.setTouched(!0),typeof r<"u"){let d=r?N.static.LINK_MODE_EXTERNAL:N.static.LINK_MODE_INTERNAL;m.setUrlMode(d)}}let l=$(this).closest(".ui-dialog");l.removeData("dialogaction"),$(this).data("dialogkeypressset")||($(this).data("dialogkeypressset",!0),l.on("keypress",o=>{(o.keyCode||o.which)===13&&(P(l),o.preventDefault())}),l.find("button").on("focus",o=>{l.data("dialogaction",o.delegateTarget)}))},"open")}},"insert-file":{title:f("wikieditor-toolbar-tool-file-title"),id:"wikieditor-toolbar-file-dialog",htmlTemplate:"dialogInsertFile.html",init:n(function(){let e=Z.magicWords;$(this).find("[data-i18n-magic]").text(function(){return e[$(this).attr("data-i18n-magic")][0]}).removeAttr("data-i18n-magic");let t=f("wikieditor-toolbar-file-default");$(this).find("#wikieditor-toolbar-file-size").attr("placeholder",t).attr("size",t.length),$(this).find("[rel]").text(function(){return f($(this).attr("rel"))}).removeAttr("rel");let i=f("wikieditor-toolbar-file-alt-help"),l=f("wikieditor-toolbar-file-alt-help-label"),o=$(this).find(".wikieditor-toolbar-file-alt-help").text(l).on("click",()=>{o.text((a,s)=>s===l?i:l)})},"init"),dialog:{resizable:!1,dialogClass:"wikiEditor-toolbar-dialog",width:590,buttons:{"wikieditor-toolbar-tool-file-insert":n(function(){let e=/.+px$/,t=Z.magicWords,i=$("#wikieditor-toolbar-file-target").val(),l=$("#wikieditor-toolbar-file-caption").val(),o=$("#wikieditor-toolbar-file-alt").val(),a=$("#wikieditor-toolbar-file-float").val(),s=$("#wikieditor-toolbar-file-format").val(),r=$("#wikieditor-toolbar-file-size").val(),d=$("#wikieditor-toolbar-file-dialog").data("whitespace");if(r!==""&&!e.test(r)&&(r+="px"),i!==""){let u=`File:${i}`;u&&u.getNamespaceId()!==6&&(u=`File:${i}`),u&&(i=u)}let p=[r,s,a];p=p.filter(u=>u.length&&u!=="default"),o.length&&p.push(t.img_alt[0].replace("$1",o)),l.length&&p.push(l);let c=p.length===0?i:i+"|"+p.join("|");$(this).dialog("close"),Y.fn.doAction($(this).data("context"),{type:"replace",options:{pre:d[0]+"[[",peri:c,post:"]]"+d[1],ownline:!0}},$(this)),$(["#wikieditor-toolbar-file-target","#wikieditor-toolbar-file-caption","#wikieditor-toolbar-file-alt","#wikieditor-toolbar-file-size"].join(",")).val(""),$("#wikieditor-toolbar-file-float").val("default"),$("#wikieditor-toolbar-file-format").val(t.img_thumbnail[0])},"wikieditor-toolbar-tool-file-insert"),"wikieditor-toolbar-tool-file-cancel":n(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-file-cancel"),"wikieditor-toolbar-tool-file-upload":n(function(){OO.ui.alert("Unsupported!")},"wikieditor-toolbar-tool-file-upload")},open:n(function(){let e=Z.magicWords,t={pre:"",post:"",fileName:"",caption:"",fileAlt:"",fileSize:"",fileFloat:"default",fileFormat:e.img_thumbnail[0]},i=n(function(a){if(a.includes(""))return!1;let r=/^(\s*)\[\[(.*)\]\](\s*)$/.exec(a);if(!r)return!1;let d=r[2].replace(/\[\[[^[\]]*\]\]|\{\{[^{}]\}\}/g,u=>u.replace(/\|/g,"")).split("|"),p=d[0];if(!p||p.getNamespaceId()!==6)return!1;let c={pre:r[1],post:r[3],fileName:p.getMainText()};for(let u=1;u<d.length;u++){let b=d[u],k=b.toLowerCase();if(e.img_right.includes(k))c.fileFloat=e.img_right[0];else if(e.img_left.includes(k))c.fileFloat=e.img_left[0];else if(e.img_none.includes(k))c.fileFloat=e.img_none[0];else if(e.img_center.includes(k))c.fileFloat=e.img_center[0];else if(e.img_thumbnail.includes(k))c.fileFormat=e.img_thumbnail[0];else if(e.img_framed.includes(k))c.fileFormat=e.img_framed[0];else if(e.img_frameless.includes(k))c.fileFormat=e.img_frameless[0];else if(e.img_alt.includes(k.split("=",2)[0]+"=$1"))c.fileAlt=b.split("=",2)[1];else if(/.+px$/.test(k))c.fileSize=k.replace(/px$/,"");else{if(k==="")continue;if(u===d.length-1)c.caption=b.replace(new RegExp(escape(""),"g"),"|");else return!1}}return c.fileFormat||(c.fileFormat="default"),c},"parseFileSyntax"),o=$(this).data("context").$textarea.textSelection("getSelection");if(o!==""&&Object.assign(t,i(o)),$("#wikieditor-toolbar-file-dialog").data("whitespace",[t.pre,t.post]),$("#wikieditor-toolbar-file-target").val(t.fileName),$("#wikieditor-toolbar-file-caption").val(t.caption),$("#wikieditor-toolbar-file-alt").val(t.fileAlt),$("#wikieditor-toolbar-file-float").val(t.fileFloat),$("#wikieditor-toolbar-file-format").val(t.fileFormat),$("#wikieditor-toolbar-file-size").val(t.fileSize),$("#wikieditor-toolbar-file-target").trigger("focus"),!$(this).data("dialogkeypressset")){$(this).data("dialogkeypressset",!0);let a=$(this).closest(".ui-dialog");a.on("keypress",s=>{s.which===13&&(P(a),s.preventDefault())}),a.find("button").on("focus",s=>{a.data("dialogaction",s.delegateTarget)})}},"open")}},"insert-table":{title:f("wikieditor-toolbar-tool-table-title"),id:"wikieditor-toolbar-table-dialog",htmlTemplate:"dialogInsertTable.html",init:n(function(){$(this).find("[rel]").each(function(){$(this).text(f($(this).attr("rel")))}),$("#wikieditor-toolbar-table-dimensions-rows").val(3),$("#wikieditor-toolbar-table-dimensions-columns").val(3),$("#wikieditor-toolbar-table-wikitable").on("click",()=>{$(".wikieditor-toolbar-table-preview").toggleClass("wikitable")}),$("#wikieditor-toolbar-table-preview").clone().attr("id","wikieditor-toolbar-table-preview2").addClass("sortable").insertAfter($("#wikieditor-toolbar-table-preview")).hide(),($("#wikieditor-toolbar-table-preview2").tablesorter??(()=>{}))(),$("#wikieditor-toolbar-table-sortable").on("click",()=>{$("#wikieditor-toolbar-table-preview").hide().attr("id","wikieditor-toolbar-table-preview3"),$("#wikieditor-toolbar-table-preview2").attr("id","wikieditor-toolbar-table-preview").show(),$("#wikieditor-toolbar-table-preview3").attr("id","wikieditor-toolbar-table-preview2")}),$("#wikieditor-toolbar-table-dimensions-header").on("click",()=>{let e=$(".wikieditor-toolbar-table-preview-header").html(),t=$(".wikieditor-toolbar-table-preview-hidden").html();$(".wikieditor-toolbar-table-preview-header").html(t),$(".wikieditor-toolbar-table-preview-hidden").html(e),($("#wikieditor-toolbar-table-preview, #wikieditor-toolbar-table-preview2").filter(".sortable").tablesorter??(()=>{}))()})},"init"),dialog:{resizable:!1,dialogClass:"wikiEditor-toolbar-dialog",width:590,buttons:{"wikieditor-toolbar-tool-table-insert":n(function(){let e=$("#wikieditor-toolbar-table-dimensions-rows").val(),t=$("#wikieditor-toolbar-table-dimensions-columns").val(),i=parseInt(e,10),l=parseInt(t,10),o=$("#wikieditor-toolbar-table-dimensions-header").prop("checked")?1:0;if(isNaN(i)||isNaN(l)||String(i)!==e||String(l)!==t||e<0||t<0){alert(f("wikieditor-toolbar-tool-table-invalidnumber"));return}if(i+o===0||l===0){alert(f("wikieditor-toolbar-tool-table-zero"));return}if(i*l>1e3){alert(f("wikieditor-toolbar-tool-table-toomany","1000"));return}let a=f("wikieditor-toolbar-tool-table-example-caption"),s=f("wikieditor-toolbar-tool-table-example-header"),r=f("wikieditor-toolbar-tool-table-example"),d="";d+="|+ "+a+`
`;for(let u=0;u<i+o;u++){d+=`|-
`;for(let b=0;b<l;b++){let k=o&&u===0,_=k?"!":"|";b>0&&(_+=_),d+=_+" "+(k?s:r)+" "}d=d.slice(0,d.length-1)+`
`}let p=[];$("#wikieditor-toolbar-table-wikitable").is(":checked")&&p.push("wikitable"),$("#wikieditor-toolbar-table-sortable").is(":checked")&&p.push("sortable");let c=p.length>0?' class="'+p.join(" ")+'"':"";$(this).dialog("close"),Y.fn.doAction($(this).data("context"),{type:"replace",options:{pre:"{|"+c+`
`,peri:d,post:"|}",ownline:!0}},$(this)),$("#wikieditor-toolbar-table-dimensions-rows").val(3),$("#wikieditor-toolbar-table-dimensions-columns").val(3),$("#wikieditor-toolbar-table-dimensions-header").is(":checked")||$("#wikieditor-toolbar-table-dimensions-header").trigger("click"),$("#wikieditor-toolbar-table-wikitable").is(":checked")||$("#wikieditor-toolbar-table-wikitable").trigger("click"),$("#wikieditor-toolbar-table-sortable").is(":checked")&&$("#wikieditor-toolbar-table-sortable").trigger("click")},"wikieditor-toolbar-tool-table-insert"),"wikieditor-toolbar-tool-table-cancel":n(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-table-cancel")},open:n(function(){$("#wikieditor-toolbar-table-dimensions-rows").trigger("focus");let e=$(this).closest(".ui-dialog");e.removeData("dialogaction"),$(this).data("dialogkeypressset")||($(this).data("dialogkeypressset",!0),e.on("keypress",t=>{(t.keyCode||t.which)===13&&(P(e),t.preventDefault())}),e.find("button").on("focus",t=>{e.data("dialogaction",t.delegateTarget)}))},"open")}},"search-and-replace":{title:f("wikieditor-toolbar-tool-replace-title"),id:"wikieditor-toolbar-replace-dialog",htmlTemplate:"dialogReplace.html",init:n(function(){$(this).find("[rel]").each(function(){$(this).text(f($(this).attr("rel")))}),$(this).data("replaceCallback",e=>{$("#wikieditor-toolbar-replace-nomatch, #wikieditor-toolbar-replace-success, #wikieditor-toolbar-replace-emptysearch, #wikieditor-toolbar-replace-invalidregex").hide();let t=$("#wikieditor-toolbar-replace-search").val();if(t===""){$("#wikieditor-toolbar-replace-emptysearch").show();return}let i=$("#wikieditor-toolbar-replace-replace").val(),l="m";$("#wikieditor-toolbar-replace-case").is(":checked")||(l+="i");let a=$("#wikieditor-toolbar-replace-regex").is(":checked");a||(t=escape(t)),$("#wikieditor-toolbar-replace-word").is(":checked")&&(t="\\b(?:"+t+")\\b"),e==="replaceAll"&&(l+="g");let r;try{r=new RegExp(t,l)}catch(k){$("#wikieditor-toolbar-replace-invalidregex").text(f("wikieditor-toolbar-tool-replace-invalidregex",k.message)).show();return}let d=$(this).data("context").$textarea,p=d.textSelection("getContents"),c=!1,u,b;if(e!=="replaceAll"&&(u=$(this).data(e==="replace"?"matchIndex":"offset"),b=p.slice(u),c=b.match(r)),c||(u=0,b=p,c=b.match(r)),!c)$("#wikieditor-toolbar-replace-nomatch").show();else if(e==="replaceAll")d.textSelection("setContents",p.replace(r,i)),$("#wikieditor-toolbar-replace-success").text(f("wikieditor-toolbar-tool-replace-success",c.length)).show(),$(this).data("offset",0);else{if(e==="replace"){let I;a?I=c[0].replace(r,i):I=i,c&&(d.textSelection("encapsulateSelection",{peri:I,replace:!0,selectionStart:u+c.index,selectionEnd:u+c.index+c[0].length,selectPeri:!0}),p=d.textSelection("getContents")),u=u+c.index+I.length,b=p.slice(u),c=b.match(r),c||(u=0,b=p,c=b.match(r)),c||(c={index:0,0:{length:0}})}let k=u+c.index,_=k+c[0].length;$(this).data("matchIndex",k),d.textSelection("setSelection",{start:k,end:_}),d.textSelection("scrollToCaretPosition"),$(this).data("offset",_),d[0].focus()}})},"init"),dialog:{width:500,dialogClass:"wikiEditor-toolbar-dialog",modal:!1,buttons:{"wikieditor-toolbar-tool-replace-button-findnext":n(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"find")},"wikieditor-toolbar-tool-replace-button-findnext"),"wikieditor-toolbar-tool-replace-button-replace":n(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"replace")},"wikieditor-toolbar-tool-replace-button-replace"),"wikieditor-toolbar-tool-replace-button-replaceall":n(function(e){$(this).closest(".ui-dialog").data("dialogaction",e.target),$(this).data("replaceCallback").call(this,"replaceAll")},"wikieditor-toolbar-tool-replace-button-replaceall"),"wikieditor-toolbar-tool-replace-close":n(function(){$(this).dialog("close")},"wikieditor-toolbar-tool-replace-close")},open:n(function(){$(this).data({offset:0,matchIndex:0});let e=$(this).closest(".ui-dialog");$("#wikieditor-toolbar-replace-search").trigger("focus"),$("#wikieditor-toolbar-replace-nomatch, #wikieditor-toolbar-replace-success, #wikieditor-toolbar-replace-emptysearch, #wikieditor-toolbar-replace-invalidregex").hide(),$(this).data("onetimeonlystuff")||($(this).data("onetimeonlystuff",!0),e.on("keypress",i=>{(i.keyCode||i.which)===13&&(P(e),i.preventDefault())}),e.find("button").on("focus",i=>{e.data("dialogaction",i.delegateTarget)}));let t=$(this).data("context").$textarea;t.on("keypress.srdialog",i=>{i.which===13?(P(t),i.preventDefault()):i.which===27&&$(this).dialog("close")})},"open"),close:n(function(){$(this).data("context").$textarea.off("keypress.srdialog"),$(this).closest(".ui-dialog").data("dialogaction",!1)},"close")}}}}},"getDefaultConfig")}});var ee;se();function Se(e,t){e&&void 0;let i;e&&t?i="switchnochange":e?i="switchwithout":t?i="nochange":i="abandon"}n(Se,"logAbort");$(()=>{let e=$("#wpTextbox1"),t=$("#editingStatsId"),i=e.val();if($("#wikieditorUsed").val("yes"),t.length){if(ee=t.val(),window.performance&&window.performance.timing){let s=Date.now();s-window.performance.timing.navigationStart,e.on("wikiEditor-toolbar-doneInitialSections",()=>{Date.now()-window.performance.timing.navigationStart}).one("input",()=>{Date.now()-s})}let l=e.closest("form");localStorage.get("wikieditor-uselivepreview")&&l.find("#wpPreview").on("click",()=>{});let o;l.on("submit",()=>{o=!0});let a=window.onunload;window.onunload=function(){let r=$("#ca-ve-edit")[0],d=r&&(document.activeElement===r||$.contains(r,document.activeElement)),p;return a&&(p=a()),o||Se(d,!1),ee=Math.floor(Math.random()<<32).toString(16),t.val(ee),p},e.on("wikiEditor-switching-visualeditor",()=>{window.onunload=a,Se(!0,!1)})}$("#toolbar").remove()});window.addWikiEditor=function(e){if(e.css("display")==="none")return;e.wikiEditor("addModule",ue());let t=Ee();t.replaceIcons(e),e.wikiEditor("addModule",t.getDefaultConfig())};})();
/*!
 * These plugins provide extra functionality for interaction with textareas.
 *
 * - encapsulateSelection: Ported from skins/common/edit.js by Trevor Parscal
 *    2009 Wikimedia Foundation (GPLv2) - https://www.wikimedia.org
 * - getCaretPosition, scrollToCaretPosition: Ported from Wikia's LinkSuggest extension
 *   https://github.com/Wikia/app/blob/c0cd8b763/extensions/wikia/LinkSuggest/js/jquery.wikia.linksuggest.js
 *    2010 Inez Korczyski (korczynski@gmail.com) & Jess Martnez Novo (martineznovo@gmail.com) (GPLv2)
 */
